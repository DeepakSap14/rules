!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@aribaui/core"),require("typescript-collections"),require("@aribaui/components"),require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@angular/router"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@aribaui/metaui",["exports","@aribaui/core","typescript-collections","@aribaui/components","@angular/core","@angular/forms","@angular/common","@angular/router","@angular/platform-browser"],t):t((e.aribaui=e.aribaui||{},e.aribaui.metaui={}),null,null,null,e.ng.core,e.ng.forms,e.ng.common,e.ng.router,e.ng.platformBrowser)}(this,function(e,t,r,n,i,o,a,s,l){"use strict";var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function u(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function _(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return a}var y=function(){function e(e,t,r){void 0===r&&(r=0),this._matches=e,this._keysMatchedMask=t,this._matchPathCRC=r}return e.addInt=function(e,r){if(t.isBlank(e)){var n=new Array(4);return n[0]=1,n[1]=r,n}var i=e[0];if(e[i++]===r)return e;if(i>=e.length){new Array(2*i);e=e.slice(0,i)}return e[i]=r,e[0]=i,e},e.filterMustUse=function(r,n,i){if(t.isBlank(n))return null;for(var o,a=n[0],s=0;s<a;s++){var l=n[s+1];0!=(r[l].keyMatchesMask&i)&&(o=e.addInt(o,l))}return o},e.intersect=function(r,n,i,o,a){if(t.isBlank(n))return i;var s,l=1,c=t.isPresent(n[0])?n[0]:0,u=1,p=t.isPresent(i[0])?i[0]:0;for(e._Debug_ElementProcessCount+=c+p;l<=c||u<=p;){var _=l<=c?r[n[l]].keyIndexedMask:0,y=u<=p?r[i[u]].keyIndexedMask:0,h=l>c?1:u>p?-1:n[l]-i[u];0===h?(s=e.addInt(s,n[l]),l++,u++):h<0?(0==(_&a)&&(s=e.addInt(s,n[l])),l++):(0==(y&o)&&(s=e.addInt(s,i[u])),u++)}return s},e.union=function(r,n){if(t.isBlank(r))return n;if(t.isBlank(n))return r;var i,o=r[0],a=n[0];if(0===o)return n;if(0===a)return r;e._Debug_ElementProcessCount+=o+a;for(var s=1,l=r[1],c=1,u=n[1];s<=o||c<=a;){var p=l-u;i=e.addInt(i,p<=0?l:u),p<=0&&(l=++s<=o?r[s]:Number.MAX_VALUE),p>=0&&(u=++c<=a?n[c]:Number.MAX_VALUE)}return i},e._arrayEq=function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;var r=e[0];if(r!==t[0])return!1;for(var n=1;n<=r;n++)if(e[n]!==t[n])return!1;return!0},e.prototype.filter=function(r,n,i,o,a){if(t.isBlank(i))return null;for(var s,l=i[0],c=0;c<l;c++){var u=i[c+1];if(!(u>=n)){var p=r[u];p.disabled()||0!=(p.keyAntiMask&o)||(0==(p.keyMatchesMask&~o)&&(p.keyMatchesMask===p.keyIndexedMask||t.isPresent(a)&&p.matches(a))?(!V._DebugDoubleCheckMatches||null!=a&&p.matches(a)||t.assert(!1,"Inconsistent (negative) match on rule: "+p),s=e.addInt(s,u)):V._DebugDoubleCheckMatches&&null!=a&&p.matches(a))}}return s},e.prototype.hashCode=function(){var e=31*this._keysMatchedMask+this._matchPathCRC;if(t.isPresent(this._matches))for(var r=0,n=this._matches[0];r<n;r++)e=t.crc32(e,this._matches[r+1]);return e},Object.defineProperty(e.prototype,"keysMatchedMask",{get:function(){return this._keysMatchedMask},enumerable:!0,configurable:!0}),e.prototype.equalsTo=function(t){return t instanceof e&&this._keysMatchedMask===t._keysMatchedMask&&this._matchPathCRC===t._matchPathCRC&&e._arrayEq(this._matches,t._matches)},e.prototype.toString=function(){var e=new t.StringJoiner([]);return e.add("_matches"),e.add((t.isPresent(this._matches)?this._matches.length:0)+""),e.add("_keysMatchedMask"),e.add(this._keysMatchedMask+""),e.add("_keysMatchedMask"),e.add(this._matchPathCRC+""),e.add("hashcode"),e.add(this.hashCode()+""),e.toString()},e.EmptyMatchArray=[],e._Debug_ElementProcessCount=0,e}(),h=function(e){function r(t,r,n,i){void 0===n&&(n=0);var o=e.call(this,t,r,n)||this;return o._matches=t,o._keysMatchedMask=r,o._matchPathCRC=n,o._overUnionMatch=i,o}return u(r,e),r.prototype.equalsTo=function(r){return e.prototype.equalsTo.call(this,r)&&(this._overUnionMatch===r._overUnionMatch||t.isPresent(this._overUnionMatch)&&t.isPresent(r._overUnionMatch)&&this._overUnionMatch.equalsTo(r._overUnionMatch))},r}(y),d=function(e){function r(t,r,n,i){var o=e.call(this,null,null,0,null!=i?i._overUnionMatch:null)||this;return o._meta=t,o._keyData=r,o._value=n,o._prevMatch=i,o._metaGeneration=0,o._initMatch(),o}return u(r,e),r.prototype.setOverridesMatch=function(e){this._overUnionMatch=e},r.prototype.matches=function(){return this._invalidateIfStale(),t.isBlank(this._matches)&&this._initMatch(),this._matches},r.prototype.filterResult=function(){return this.filter(this._meta._rules,this._meta._ruleCount,this.matches(),this._keysMatchedMask,null)},r.prototype.initMatchValues=function(e){t.isPresent(this._prevMatch)&&this._prevMatch.initMatchValues(e),t.isPresent(this._overUnionMatch)&&this._overUnionMatch.initMatchValues(e),this._meta.matchArrayAssign(e,this._keyData,this._keyData.matchValue(this._value))},r.prototype.filteredMatches=function(){var e,r,n=this.matches(),i=this._keysMatchedMask|(t.isPresent(this._overUnionMatch)?this._overUnionMatch._keysMatchedMask:0);return t.isPresent(this._overUnionMatch)&&t.isPresent(e=this._overUnionMatch.matches())&&(n=t.isBlank(n)?e:y.intersect(this._meta._rules,n,e,this._keysMatchedMask,this._overUnionMatch._keysMatchedMask)),V._UsePartialIndexing&&(r=this._meta.newMatchArray(),this.initMatchValues(r)),this.filter(this._meta._rules,this._meta._ruleCount,n,i,r)},r.prototype.valueForKey=function(e){return this._keyData._key===e?this._value:t.isPresent(this._prevMatch)?this._prevMatch.valueForKey(e):null},r.prototype.immutableCopy=function(){return this._invalidateIfStale(),new h(this.matches(),this._keysMatchedMask,this._matchPathCRC,this._overUnionMatch)},r.prototype._invalidateIfStale=function(){this._metaGeneration<this._meta.ruleSetGeneration&&this._initMatch()},r.prototype.join=function(e,t,r,n){return y.intersect(this._meta._rules,e,t,r,n)},r.prototype._initMatch=function(){var e,r=t.shiftLeft(1,this._keyData._id);if(t.isArray(this._value))try{for(var n=p(this._value),i=n.next();!i.done;i=n.next()){var o=i.value,a=this._keyData.lookup(this._meta,o);e=y.union(a,e)}}catch(h){s={error:h}}finally{try{i&&!i.done&&(l=n["return"])&&l.call(n)}finally{if(s)throw s.error}}else e=this._keyData.lookup(this._meta,this._value);var s,l,c=t.isBlank(this._prevMatch)?null:this._prevMatch.matches();this._keysMatchedMask=t.isBlank(this._prevMatch)?r:r|this._prevMatch._keysMatchedMask,t.isBlank(c)?(this._matches=e,V._UsePartialIndexing||(this._keysMatchedMask=r)):(t.isBlank(e)&&(e=y.EmptyMatchArray),this._matches=this.join(e,c,r,this._prevMatch._keysMatchedMask)),this._matchPathCRC=-1;for(var u=this;null!=u;u=u._prevMatch)if(this._matchPathCRC=t.crc32(this._matchPathCRC,u._keyData._key.length),t.isPresent(u._value)){var _=t.isArray(u._value)?u._value.join(","):u._value;this._matchPathCRC=t.crc32(this._matchPathCRC,t.hashCode(_))}0===this._matchPathCRC&&(this._matchPathCRC=1),this._metaGeneration=this._meta.ruleSetGeneration,this._properties=null},r.prototype._logMatchDiff=function(e,r){for(var n=1,i=e[0],o=1,a=r[0];n<=i||o<=a;){var s=n>i?1:o>a?-1:e[n]-r[o];0===s?(n++,o++):s<0?(t.print("  -- Only in A: "+this._meta._rules[e[n]]),n++):(t.print("  -- Only in B: "+this._meta._rules[r[o]]),o++)}},r.prototype.properties=function(){return this._invalidateIfStale(),t.isBlank(this._properties)&&(this._properties=this._meta.propertiesForMatch(this)),this._properties},r.prototype.debugString=function(){var e=new t.StringJoiner(["Match Result path: \n"]);return this._appendPrevPath(e),t.isPresent(this._overUnionMatch)&&(e.add("\nOverrides path: "),this._overUnionMatch._appendPrevPath(e)),e.toString()},r.prototype._appendPrevPath=function(e){t.isPresent(this._prevMatch)&&(this._prevMatch._appendPrevPath(e),e.add(" -> ")),e.add(this._keyData._key),e.add("="),e.add(this._value)},r.prototype._checkMatch=function(e,r){var n=this.filterResult();if(!t.isBlank(n))for(var i=n[0],o=0;o<i;o++){this._meta._rules[n[o+1]]._checkRule(e,r)}},r.prototype.equalsTo=function(t){return t instanceof r&&e.prototype.equalsTo.call(this,t)&&t._metaGeneration===this._metaGeneration&&t._properties.size===this._properties.size},r}(h),v=function(e){function t(t,r,n,i){return e.call(this,t,r,n,i)||this}return u(t,e),t.prototype.join=function(e,t,r,n){return y.union(e,t)},t}(d),f=function(){function e(e,r){this._parent=e,this._map=r,this._overrideCount=0,this._size=0,t.isBlank(r)&&(this._map=new Map)}return e.toMapEntry=function(r){var n=r.value;return t.isPresent(n)&&e.isMapEntry(n)?n:{key:t.isPresent(r.value)?r.value[0]:r.value,value:t.isPresent(r.value)?r.value[1]:r.value,hasNext:!r.done}},e.isMapEntry=function(e){return t.isPresent(e)&&t.isPresent(e.hasNext)},e.isNMNullMarker=function(e){return t.isPresent(e)&&e.nesnullmarker},e.prototype.toMap=function(){return this._parent},e.prototype.reparentedMap=function(t){var r=new e(t,this._map);return r._overrideCount=this._overrideCount,r},e.prototype.get=function(t){var r=this._map.has(t)?this._map.get(t):this._parent.get(t);return e.isNMNullMarker(r)?null:r},e.prototype.keys=function(){return t.unimplemented()},e.prototype.values=function(){return t.unimplemented()},e.prototype.clear=function(){this._parent.clear(),this._map.clear()},e.prototype.set=function(r,n){var i=this._map.get(r);return(e.isNMNullMarker(i)||t.isBlank(i))&&this._parent.has(r)&&(this._overrideCount+=e.isNMNullMarker(i)?-1:1),this._map.set(r,n),this},e.prototype["delete"]=function(t){var r=!1;return this._map.has(t)?(this._map["delete"](t),r=!0,this._parent.has(t)&&(this._map.set(t,e._NullMarker),this._overrideCount++)):this._parent.has(t)&&(this._parent.get(t),this._map.set(t,e._NullMarker),this._overrideCount+=2),r},e.prototype.forEach=function(t,r){for(var n,i=this.entries();(n=e.toMapEntry(i.next()))&&n.hasNext;)t(n.value,n.key,this._parent)},e.prototype.has=function(t){return this._map.has(t)?!e.isNMNullMarker(this._map.get(t)):this._parent.has(t)},e.prototype[Symbol.iterator]=function(){return new m(this)},e.prototype.entries=function(){return new m(this)},Object.defineProperty(e.prototype,"size",{get:function(){return this._parent.size+this._map.size-this._overrideCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"NestedMap"},e._NullMarker={nesnullmarker:!0},e}(),m=function(){function e(e){this._nestedMap=e,this._parentIterator=e.parent.entries(),this._nestedIterator=e.map.entries(),this.advanceToNext()}return e.prototype.next=function(){return this._currentEntry=this._nextEntry,this.advanceToNext(),{value:this._currentEntry,done:!this._currentEntry.hasNext}},e.prototype[Symbol.iterator]=function(){return this},e.prototype.advanceToNext=function(){for(this._fromNested=!1;!this._fromNested&&(this._currentNestedEntry=f.toMapEntry(this._nestedIterator.next()))&&this._currentNestedEntry.hasNext;)this._nextEntry=this._currentNestedEntry,f.isNMNullMarker(this._nextEntry.value)||(this._fromNested=!0);if(!this._fromNested){for(;(this._currentParentEntry=f.toMapEntry(this._parentIterator.next()))&&this._currentParentEntry.hasNext;)if(this._nextEntry=this._currentParentEntry,!this._nestedMap.map.has(this._nextEntry.key))return;this._nextEntry=this._currentParentEntry}},e}(),k=function(){function e(){}return e.prototype.evaluate=function(e){return t.unimplemented()},e.prototype.bind=function(e){return t.unimplemented()},e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(k),b=function(e){function r(t){var r=e.call(this)||this;return r._orig=t,r.propertyAwaking=!0,r}return u(r,e),r.prototype.getDynamicValue=function(){return this._orig},r.prototype.awakeForPropertyMap=function(e){return new r(ie(this._orig)?this._orig.awakeForPropertyMap(e):this._orig)},r.prototype.evaluate=function(e){return t.isBlank(this._cached)&&(this._cached=e.staticallyResolveValue(this._orig)),this._cached},r.prototype.toString=function(){var e=new t.StringJoiner(["StaticDynamicWrapper"]);return e.add("("),e.add(t.isPresent(this._cached)?this._cached:this._orig),e.add(t.isBlank(this._cached)?" unevaluated":""),e.add(")"),e.toString()},r}(g),D=function(e){function r(t){var r=e.call(this)||this;return r._orig=t,r}return u(r,e),r.prototype.evaluate=function(e){return this._orig.evaluate(e)},r.prototype.toString=function(){var e=new t.StringJoiner(["StaticallyResolvableWrapper"]);return e.add("("),e.add(this._orig.toString()),e.add(")"),e.toString()},r}(g),C=function(e){function r(r){var n=e.call(this)||this;return n.settable=!0,n.fieldPath=new t.FieldPath(r),n}return u(r,e),r.prototype.evaluate=function(e){return this.fieldPath.getFieldValue(e)},r.prototype.evaluateSet=function(e,t){this.fieldPath.setFieldValue(e,t)},r}(k);function P(e){return t.isPresent(e.settable)}var x=function(e){function r(r){var n=e.call(this)||this;return n._expressionString=r,n._extendedObjects=new Map,n.addTypeToContext("Meta",V),n.addTypeToContext("FieldPath",t.FieldPath),n}return u(r,e),r.prototype.addTypeToContext=function(e,r){t.isFunction(r)&&this._extendedObjects.set(e,r)},r.prototype.evaluate=function(e){var r=this,n=0;this._extendedObjects.forEach(function(t,i){var o="DynObj"+n++;e[o]=t,-1!==r._expressionString.indexOf(i+".")&&(r._expressionString=r._expressionString.replace(i+".",o+"."))});var i=t.evalExpressionWithCntx(this._expressionString,"",e,e);return n=0,this._extendedObjects.forEach(function(r,i){var o="DynObj"+n++;t.isPresent(e[o])&&delete e[o]}),i},r.prototype.toString=function(){var e=new t.StringJoiner(["expr:"]);return e.add("("),e.add(this._expressionString),e.add(")"),e.toString()},r}(k),M=function(e){function r(t,r,n){var i=e.call(this)||this;return i._merger=t,i._orig=r,i._override=n,i.propertyAwaking=!0,i}return u(r,e),r.prototype.evaluate=function(e){return this._merger.merge(e.resolveValue(this._override),e.resolveValue(this._orig),e.isDeclare())},r.prototype.awakeForPropertyMap=function(e){var t=this._orig,n=this._override;return ie(t)&&(t=t.awakeForPropertyMap(e)),ie(n)&&(n=n.awakeForPropertyMap(e)),t!==this._orig||n!==this._override?new r(this._merger,t,n):this},r.prototype.toString=function(){var e=new t.StringJoiner(["Chain"]);return e.add("<"),e.add(this._merger.toString()),e.add(">"),e.add(": "),e.add(this._override),e.add(" => "),e.add(this._orig),e.toString()},r}(k),S=function(){function e(){}return e.value=function(e,r){return"String"===e?t.isBlank(r)||t.isString(r)?r:r.toString():"Boolean"===e?t.isBlank(r)||t.isBoolean(r)?r:t.BooleanWrapper.boleanValue(r):"Number"===e?t.isBlank(r)||t.isNumber(r)?r:parseInt(r.toString()):r},e}(),w=function(e){function r(n,i){void 0===i&&(i=!1);var o=e.call(this)||this;return o._meta=n,o.nested=i,o._values=new Map,o._entries=[],o._frameStarts=[],o._recPool=[],t.isBlank(r.EmptyMap)&&(r.EmptyMap=new U),r._Debug_SetsCount=0,o._accessor=new L(o),o._currentActivation=r.getActivationTree(n),o._rootNode=o._currentActivation,o.isNested=i,o}return u(r,e),r.getActivationTree=function(e){var r=t.objectToName(A),n=e.identityCache.getValue(r);return t.isBlank(n)&&(n=new A,e.identityCache.setValue(r,n)),n},r.prototype.push=function(){this._frameStarts.push(this._entries.length)},Object.defineProperty(r.prototype,"meta",{get:function(){return this._meta},enumerable:!0,configurable:!0}),r.prototype.pop=function(){var e=this._frameStarts.length;t.assert(e>0,"Popping empty stack");for(var r,n=this._frameStarts.pop();(r=this._entries.length)>n;){var i=r-1,o=this._entries.splice(i,1)[0];-1===o.srec.lastAssignmentIdx?this._values["delete"](o.srec.key):this._undoOverride(o,i),this._currentActivation=i>0?this._entries[i-1].srec.activation:this._rootNode,this.assertContextConsistent(),o.reset(),this._recPool.push(o)}this._currentProperties=null},r.prototype.set=function(e,r){var n=this;if(this._set(e,r,!1,!1),e===ae.KeyObject){var i=this._values.get(ae.KeyObject);t.isBlank(i.$toString)&&(i.$toString=function(){var e=n.values.get(ae.KeyClass);return ye.beautifyClassName(e)})}},r.prototype.merge=function(e,t){this._set(e,t,!0,!1)},r.prototype.setScopeKey=function(e){if(t.assert(this._meta.keyData(e).isPropertyScope,e+" is not a valid context key"),e!==this._currentPropertyScopeKey()){var r=this.values.get(e);t.isBlank(r)&&(r=V.KeyAny),this.set(e,r)}},Object.defineProperty(r.prototype,"values",{get:function(){var e;return t.ListWrapper.isEmpty(this._entries)||t.isBlank(e=t.ListWrapper.last(this._entries).propertyLocalValues(this))?this._values:e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"properties",{get:function(){return this._accessor},enumerable:!0,configurable:!0}),r.prototype.propertyForKey=function(e){var t=this.allProperties().get(e);return this.resolveValue(t)},r.prototype.listPropertyForKey=function(e){var r=this.propertyForKey(e);return t.isBlank(r)?[]:t.isArray(r)?r:[r]},r.prototype.booleanPropertyForKey=function(e,r){var n=this.propertyForKey(e);return t.isBlank(n)?r:t.BooleanWrapper.boleanValue(n)},r.prototype.allProperties=function(){if(t.isBlank(this._currentProperties)){var e=this.lastMatch();t.isPresent(e)&&(this._currentProperties=e.properties())}return t.isPresent(this._currentProperties)?this._currentProperties:r.EmptyMap},r.prototype.resolveValue=function(e){for(var r;e!==r&&t.isPresent(e)&&e instanceof k;){r=e;var n=e;n instanceof x&&n.addTypeToContext("UIMeta",ye),e=n.evaluate(this)}return e},r.prototype.staticallyResolveValue=function(e){for(var r=null;e!==r&&t.isPresent(e)&&e instanceof g;)r=e,e=e.evaluate(this);return e},r.prototype.pushAndResolveStatic=function(e,r,n){var i,o=this;this.push(),t.MapWrapper.iterable(e).forEach(function(e,t){"*"===e?i=t:o.set(t,e)}),t.isPresent(i)&&this.setScopeKey(i);var a=this.allProperties().get(r);return a=n?this.staticallyResolveValue(a):this.resolveValue(a),this.pop(),a},r.prototype.pushAndResolve=function(e,t){return this.pushAndResolveStatic(e,t,!1)},r.prototype.snapshot=function(){return new I(this)},r.prototype.activeAssignments=function(){for(var e=new Array,t=0,r=this._entries.length;t<r;t++){var n=this._entries[t];if(0===n.maskedByIdx&&!n.srec.fromChaining){var i=new B;i.key=n.srec.key,i.value=n.val,i.salience=n.srec.salience,e.push(i)}}return e},r.prototype.allAssignments=function(){for(var e=new Array,t=0,r=this._entries.length;t<r;t++){var n=this._entries[t];if(!n.srec.fromChaining){var i=new B;i.key=n.srec.key,i.value=n.val,i.salience=n.srec.salience,e.push(i)}}return e},r.prototype._set=function(e,r,n,i){var o=this._meta.transformValue(e,r),a=!1,s=this.meta.componentRegistry;e===ae.KeyObject&&t.isPresent(s)&&s.registerType(t.className(r),r.constructor);var l=this._currentActivation.getChildActivation(e,o,i);t.isBlank(l)&&(a=this._createNewFrameForSet(e,o,r,n,i)),t.isPresent(l)&&(a=this._applyActivation(l,r)),a&&this.awakeCurrentActivation()},r.prototype.newContextRec=function(){var e=this._recPool.length;return e>0?this._recPool.splice(e-1,1)[0]:new F},r.prototype._applyActivation=function(e,r){t.assert(e._parent===this._currentActivation,"Attempt to apply activation on mismatched parent"),this._entries.length!==e._origEntryCount&&t.assert(!1,"Mismatched context stack size (%s) from when activation was popped "+this._entries.length+" "+e._origEntryCount);var n=e._recs.length;if(0===n)return!1;for(var i=0;i<n;i++){var o=e._recs[i],a=this.newContextRec();a.srec=o,-1!==o.lastAssignmentIdx&&this._prepareForOverride(this._entries.length,o.lastAssignmentIdx),a.val=0!==i||this.meta.isNullMarker(r)?o.val:r,this._values.set(o.key,a.val),this._entries.push(a)}return this._currentActivation=e,this._currentProperties=null,!0},r.prototype.awakeCurrentActivation=function(){var e=this._currentActivation.deferredAssignments;t.isPresent(e)&&this.applyDeferredAssignments(e)},r.prototype.applyDeferredAssignments=function(e){try{for(var t=p(e),r=t.next();!r.done;r=t.next()){var n=r.value,i=this.staticallyResolveValue(this.allProperties().get(n.key));if(n.value===i){var o=this.resolveValue(n.value);this._set(n.key,o,!1,!0)}}}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=t["return"])&&s.call(t)}finally{if(a)throw a.error}}var a,s},r.prototype._inDeclare=function(){var e=this.lastMatchWithoutContextProps();return t.isPresent(e)&&0!=(e._keysMatchedMask&this._meta.declareKeyMask)},r.prototype._createNewFrameForSet=function(e,t,n,i,o){var a=this._currentActivation,s=new A(a);s._origEntryCount=this._entries.length,this._currentActivation=s;var l=this._set2(e,t,n,i,o);if(l)for(;this._checkApplyProperties(););return r._CacheActivations&&a.cacheChildActivation(e,t,s,o),this._currentActivation=l?s:a,this._currentActivation!==a},r.prototype._createNewPropertyContextActivation=function(e){this.push();var n=new A(e);n._origEntryCount=this._entries.length,this._currentActivation=n;var i=this._values,o=new f(i);return this._values=o,this.applyPropertyContextAndChain(),n._recs.length>0||t.isPresent(n.deferredAssignments)?(n._nestedValues=o,this._values=r.EmptyRemoveMap):n=null,this.pop(),this._values=i,this._currentActivation=e,n},r.prototype._applyPropertyActivation=function(e,n){var i=this._values;if(t.isPresent(e._nestedValues)&&(i=e._nestedValues.reparentedMap(i)),t.isPresent(e.deferredAssignments)){this.push();var o=this._values;this._values=new f(i),this._applyActivation(e,V.NullMarker),this.applyDeferredAssignments(e.deferredAssignments),n._propertyLocalValues=this._values,n._propertyLocalSrec=t.ListWrapper.last(this._entries).srec,this._values=r.EmptyRemoveMap,this.pop(),this._values=o}else n._propertyLocalValues=i,n._propertyLocalSrec=t.ListWrapper.last(e._recs)},r.prototype._isNewValue=function(e,r){return e!==r&&(t.isPresent(e)||!e===r&&!t.isArray(e)||!t.ListWrapper.contains(e,r))},r.prototype.isDeclare=function(){return t.isPresent(this.propertyForKey(V.KeyDeclare))},r.prototype.assertContextConsistent=function(){var e=this;if(r._ExpensiveContextConsistencyChecksEnabled){t.MapWrapper.iterable(this._values).forEach(function(r,n){var i=e.findLastAssignmentOfKey(n);t.assert(i>=0,"Value in context but no assignment record found "+n+" = "+r);var o=e._entries[i].val;t.assert(r===o||t.isPresent(r)&&r===o,"Value in context  doesnt match value on stack "+r+" / "+o)});for(var n=this._entries.length-1;n>=0;n--)for(var i=this._entries[n],o=!1,a=n-1;a>=0;a--){var s=this._entries[a];s.srec.key===i.srec.key&&(t.assert(!o&&s.maskedByIdx===n||(o||s.srec.fromChaining)&&s.maskedByIdx>0,"Predecessor A does not have matching maskedByIdx B  for override C:"+s.srec.key+" = "+s.val+", "+s.maskedByIdx+", "+n+" = "+i.val),t.assert(!o&&i.srec.lastAssignmentIdx===a||o||s.srec.fromChaining,"Override A1=A2 does not have proper lastAssignmentIdx B1!=B2 for predecessor C"+s.srec.key+" = "+s.val+", "+i.srec.lastAssignmentIdx+" = "+a+", "+s.val),o=!0)}}},r.prototype._set2=function(e,n,i,o,a){r._Debug_SetsCount++;var s=this._values.has(e)&&t.isPresent(this._values.get(e)),l=s?this._values.get(e):null,c=!s||this._isNewValue(l,i),u=!c&&!a&&this._meta.keyData(e).isPropertyScope&&e!==this._currentPropertyScopeKey();if(c||u){var p=void 0,_=void 0,y=this._frameStarts.length,h=-1;if(t.isBlank(l))p=this.lastMatchWithoutContextProps();else{var d=this._entries.length;if(h=this.findLastAssignmentOfKey(e),t.assert(h>=0,"Value in context but no assignment record found "+e+" = "+l),u)this._entries[h].maskedByIdx=d,p=this.lastMatchWithoutContextProps();else{var v=this._entries[h];if(v.srec.salience===y){var f=this.findLastAssignmentOfKeyWithValue(e,i);if(-1!==f&&this._entries[f].srec.salience===y)return!1}if(a&&(v.srec.salience>y||!v.srec.fromChaining))return!1;var m=this._prepareForOverride(d,h);_=this._rematchForOverride(e,n,d,m),o&&(i=V.PropertyMerger_List.merge(l,i,this.isDeclare()))}}t.assert(this._entries.length<=r.MaxContextStackSize,"MetaUI context stack exceeded max size -- likely infinite chaining: "+this._entries.length);var k=new R;k.key=e,k.val=n,k.lastAssignmentIdx=h,k.salience=y,k.fromChaining=a,t.isBlank(_)&&(_=t.isPresent(i)?this._meta.match(e,n,p):p),k.match=_,k.activation=this._currentActivation,this._currentActivation._recs.push(k);var g=this.newContextRec();return g.srec=k,g.val=i,this._entries.push(g),this._currentProperties=null,this._values.set(e,i),r._DebugRuleMatches&&this._checkMatch(k.match,e,i),this.assertContextConsistent(),!0}return!a&&this.meta.keyData(e).isPropertyScope,!1},Object.defineProperty(r.prototype,"frameStarts",{get:function(){return this._frameStarts},enumerable:!0,configurable:!0}),r.prototype._undoRecValue=function(e){-1===e.srec.lastAssignmentIdx||this._entries[e.srec.lastAssignmentIdx].maskedByIdx>0?this._values["delete"](e.srec.key):this._values.set(e.srec.key,this._entries[e.srec.lastAssignmentIdx].val)},r.prototype._prepareForOverride=function(e,t){for(var r=0;-1!==(r=this._entries[t].srec.lastAssignmentIdx)&&this._entries[t].maskedByIdx<=0;)this._entries[t].maskedByIdx=-1,t=r;for(var n=this._entries.length-1;n>=t;n--){var i=this._entries[n];i.maskedByIdx<=0&&(n===t||-1===i.maskedByIdx)&&(i.maskedByIdx=e,this._undoRecValue(i))}return t},r.prototype._rematchForOverride=function(e,r,n,i){for(var o,a,s=0;s<i;s++){var l=this._entries[s];if(0!==l.maskedByIdx)break;o=l.srec.match}for(var c=this._entries.length;s<c;s++){var u=this._entries[s];0===u.maskedByIdx?o=this._meta.match(u.srec.key,u.srec.val,o):a=this._meta.unionOverrideMatch(u.srec.key,u.srec.val,a)}return(t.isPresent(r)||t.isBlank(o))&&(o=this._meta.match(e,r,o)),o.setOverridesMatch(a),o},r.prototype._undoOverride=function(e,t){for(var r,n=e.srec.lastAssignmentIdx;-1!==(r=this._entries[n].srec.lastAssignmentIdx)&&this._entries[r].maskedByIdx===t;)n=r;for(var i=n,o=this._entries.length;i<o;i++){var a=this._entries[i];a.maskedByIdx===t&&(this._values.set(a.srec.key,a.val),a.maskedByIdx=0)}},r.prototype._checkMatch=function(e,t,r){e._checkMatch(this._values,this._meta)},r.prototype.findLastAssignmentOfKey=function(e){for(var t=this._entries.length-1;t>=0;t--){var r=this._entries[t];if(r.srec.key===e&&0===r.maskedByIdx)return t}return-1},r.prototype.findLastAssignmentOfKeyWithValue=function(e,t){for(var r=this._entries.length-1;r>=0;r--){var n=this._entries[r];if(n.srec.key===e&&!this._isNewValue(n.val,t))return r}return-1},r.prototype._checkApplyProperties=function(){for(var e=!1,r=0,n=0,i=this._inDeclare()?this._values.get(V.KeyDeclare):null;(r=this._entries.length)>n;){n=r;var o=this._entries[r-1].srec.properties(),a=o.contextKeysUpdated;if(t.isPresent(a))for(var s=0,l=a.length;s<l;s++){var c=a[s],u=c._name;if(!t.isPresent(i)||u!==i){var p=this.staticallyResolveValue(o.get(u)),_=void 0;if(!(t.isPresent(_)&&_.has(u)&&!this._isNewValue(this.staticallyResolveValue(_.get(u)),p)||this._currentActivation._parent.hasDeferredAssignmentForKey(u))){var y=c._keyDataToSet._key;p instanceof k?this._currentActivation.addDeferredAssignment(y,p):this._set2(y,p,p,!1,!0)&&(e=!0)}}}}return e},r.prototype.applyPropertyContextAndChain=function(){if(this._checkPropertyContext())for(;this._checkApplyProperties(););},r.prototype._currentPropertyScopeKey=function(){for(var e,r=this._entries.length-1;r>=0;r--){var n=this._entries[r];if(t.isPresent(e)&&n.srec.activation!==e)break;if(this._meta.keyData(n.srec.key).isPropertyScope&&!n.srec.fromChaining)return n.srec.key;t.isPresent(void 0)&&!n.srec.fromChaining&&(e=n.srec.activation)}},r.prototype._checkPropertyContext=function(){t.assert(this._values instanceof f,"Property assignment on base map?");var e=this._currentPropertyScopeKey();return!!t.isPresent(e)&&this._set2(V.ScopeKey,e,e,!1,!1)},r.prototype.debug=function(){t.print("******  Debug Call ******"),this._logContext()},r.prototype.debugString=function(){var e=new t.StringJoiner(["<b>Context:</b>&nbsp;"]);e.add("(&nbsp;"),e.add(this._entries.length+""),e.add(" entries"),e.add("&nbsp;)<br/>");for(var r=0,n=this._entries.length;r<n;r++){for(var i=r;i-- >0;)e.add("&nbsp;");var o=this._entries[r];e.add("&nbsp;"),e.add(o.srec.key),e.add("&nbsp;&nbsp;:&nbsp;"),e.add(o.srec.val),e.add(o.srec.fromChaining?" ^":""),e.add(0!==o.maskedByIdx?" X":""),e.add("<br/>")}var a=this.currentActivation._propertyActivation;if(t.isPresent(a)){var s=a._recs;e.add("&nbsp;&nbsp;&nbsp;<b>PropertyActivation...</b><br/>");for(r=0,n=s.length;r<n;r++){for(i=r+this._entries.length+1;i-- >0;)e.add("&nbsp;&nbsp;");o=s[r];e.add(o.key),e.add("&nbsp;&nbsp;:&nbsp;"),e.add(o.val),e.add(o.fromChaining?"&nbsp;&nbsp;":"&nbsp;&nbsp;!"),e.add("<br/>")}}return e.add("&nbsp;<br/><b>Props:</b><br/>"),this.writeProperties(e,this.allProperties(),1,!1),e.toString()},r.prototype._logContext=function(){var e=this.debugString();t.print(e),t.print("\n")},r.prototype.writeProperties=function(e,r,n,i){t.MapWrapper.iterable(r).forEach(function(r,o){if(!i)for(;n-- >0;)e.add("&nbsp;&nbsp;&nbsp;");t.isBlank(r)?(e.add(o),e.add(" :null"),e.add(i?";&nbsp;&nbsp;":";<br/>")):(e.add("&nbsp;&nbsp;&nbsp;"),e.add(o),e.add(":"),t.isString(r)||t.isNumber(r)?(e.add("&nbsp;&nbsp;"),e.add(r),e.add("&nbsp;&nbsp;")):t.isStringMap(r)?(e.add("{"),e.add(r),e.add("}")):r instanceof x?e.add(r.toString()):r instanceof Map?e.add(t.MapWrapper.toString(r)):t.isArray(r)?t.ListWrapper.toString(r):r instanceof G?e.add(r.toString()):r instanceof t.FieldPath&&(e.add("$"),e.add(r.toString())),i?e.add(";"):e.add("<br/>"))})},r.prototype.lastMatchWithoutContextProps=function(){return t.ListWrapper.isEmpty(this._entries)?null:this._entries[this._entries.length-1].srec.match},r.prototype.lastMatch=function(){if(t.ListWrapper.isEmpty(this._entries))return null;var e=t.ListWrapper.last(this._entries).propertyLocalMatches(this);return t.isPresent(e)?e:this.lastMatchWithoutContextProps()},r.prototype.lastStaticRec=function(){if(t.ListWrapper.isEmpty(this._entries))return null;var e=t.ListWrapper.last(this._entries).propertyLocalStaticRec(this);return t.isPresent(e)?e:t.ListWrapper.last(this._entries).srec},Object.defineProperty(r.prototype,"recPool",{get:function(){return this._recPool},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentActivation",{get:function(){return this._currentActivation},enumerable:!0,configurable:!0}),r.prototype.extendedFields=function(){return this.values},r._CacheActivations=!1,r._ExpensiveContextConsistencyChecksEnabled=!1,r._DebugRuleMatches=!1,r._Debug_SetsCount=0,r.MaxContextStackSize=200,r.EmptyMap=null,r.EmptyRemoveMap=new Map,r}(t.Extensible),A=function(){function e(e){this._parent=e,this._recs=new Array,this._origEntryCount=0}return e.prototype.getChildActivation=function(e,r,n){t.isBlank(r)&&(r=V.NullMarker);var i=n?this._valueNodeMapByContextKeyChaining:this._valueNodeMapByContextKey;if(t.isBlank(i))return null;var o=i.get(e);return t.isBlank(o)?null:o.getValue(r)},e.prototype.cacheChildActivation=function(e,n,i,o){var a;t.isBlank(n)&&(n=V.NullMarker),o?t.isBlank(a=this._valueNodeMapByContextKeyChaining)&&(a=this._valueNodeMapByContextKeyChaining=new Map):t.isBlank(a=this._valueNodeMapByContextKey)&&(a=this._valueNodeMapByContextKey=new Map);var s=a.get(e);t.isBlank(s)&&(s=new r.Dictionary,a.set(e,s)),s.setValue(n,i)},e.prototype.addDeferredAssignment=function(e,r){var n,i,o;if(t.isBlank(this.deferredAssignments))this.deferredAssignments=new Array;else try{for(var a=p(this.deferredAssignments),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.key===e){n=l;break}}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a["return"])&&o.call(a)}finally{if(i)throw i.error}}t.isBlank(n)&&((n=new K).key=e,this.deferredAssignments.push(n)),n.value=r},e.prototype.hasDeferredAssignmentForKey=function(e){if(t.isPresent(this.deferredAssignments))try{for(var r=p(this.deferredAssignments),n=r.next();!n.done;n=r.next()){if(n.value.key===e)return!0}}catch(a){i={error:a}}finally{try{n&&!n.done&&(o=r["return"])&&o.call(r)}finally{if(i)throw i.error}}return!1;var i,o},e.prototype.propertyActivation=function(e){return t.assert(e.currentActivation===this,"PropertyActivation sought on non top of stack activation"),t.isBlank(this._propertyActivation)&&(this._propertyActivation=e._createNewPropertyContextActivation(this),t.isBlank(this._propertyActivation)&&(this._propertyActivation=this)),this._propertyActivation!==this?this._propertyActivation:null},e.prototype.findExistingPropertyActivation=function(){for(var e=this;t.isPresent(e);){var r=e._propertyActivation;if(t.isPresent(r)&&r!==e&&!t.isBlank(r._recs)&&!t.ListWrapper.isEmpty(r._recs))return r;e=e._parent}return null},e.prototype.toString=function(){return r.util.makeString(this)},e}(),K=function(){return function(){}}(),B=function(){return function(){}}(),F=function(){function e(){this.maskedByIdx=0,this._didInitPropContext=!1}return e.prototype.propertyLocalMatches=function(e){return this._didInitPropContext||this.initPropContext(e),t.isPresent(this._propertyLocalSrec)?this._propertyLocalSrec.match:null},e.prototype.propertyLocalStaticRec=function(e){return this._didInitPropContext||this.initPropContext(e),this._propertyLocalSrec},e.prototype.propertyLocalValues=function(e){return this._didInitPropContext||this.initPropContext(e),this._propertyLocalValues},e.prototype.initPropContext=function(e){this._didInitPropContext=!0,t.assert(!w._ExpensiveContextConsistencyChecksEnabled||t.ListWrapper.last(e._entries)===this,"initing prop context on record not on top of stack");var r=this.srec.activation.propertyActivation(e);t.isPresent(r)&&e._applyPropertyActivation(r,this)},e.prototype.reset=function(){this.srec=null,this.val=null,this.maskedByIdx=0,this._didInitPropContext=!1,this._propertyLocalSrec=null,this._propertyLocalValues=null},e}(),R=function(){function e(){this.salience=0,this.lastAssignmentIdx=0}return e.prototype.properties=function(){return t.isPresent(this.match)?this.match.properties():w.EmptyMap},Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(e){this._key=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"val",{get:function(){return this._val},set:function(e){this._val=e},enumerable:!0,configurable:!0}),e}(),L=function(){function e(e){this.context=e}return e.prototype.get=function(e){return this.context.propertyForKey(e)},e.prototype.toString=function(){return t.MapWrapper.toString(this.context.allProperties())},e}(),I=function(){function e(e){this._context=e,this._meta=e.meta,this._origClass=e.constructor.name,this._assignments=e.activeAssignments(),this._allAssignments=e.allAssignments(),this._isNested=e.isNested}return e.prototype.hydrate=function(e){void 0===e&&(e=!0);var t=e?this._assignments:this._allAssignments,r=this._meta.newContext();r.push();var n,i;try{for(var o=p(t),a=o.next();!a.done;a=o.next()){var s=a.value;1<s.salience&&r.push(),r.set(s.key,s.value)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o["return"])&&i.call(o)}finally{if(n)throw n.error}}return r.isNested=this._isNested,r},e}(),E=function(e){function r(t,r){return void 0===r&&(r=!1),e.call(this,t,r)||this}return u(r,e),Object.defineProperty(r.prototype,"value",{get:function(){var e=this.object;if(t.isBlank(e))return null;var r=this.fieldPath();return t.isPresent(r)?r.getFieldValue(e):this.propertyForKey("value")},set:function(e){var r=this.fieldPath();if(t.isPresent(r))t.assert(t.isPresent(this.object),"Call to setValue() with no current object"),r.setFieldValue(this.object,e);else{var n=this.allProperties().get(ae.KeyValue);t.assert(P(n),"Cant set derived property: "+n);var i=n;n.evaluateSet(this,e),i.evaluateSet(this,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"object",{get:function(){return this.values.get(ae.KeyObject)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"formatters",{get:function(){return t.isBlank(this._formatters)&&(this._formatters=new Map),this._formatters},enumerable:!0,configurable:!0}),r.prototype.fieldPath=function(){return this.allProperties().fieldPath},r.prototype.locale=function(){return r.DefaultLocale},r.prototype.timezone=function(){return(new Date).getTimezoneOffset()},r.DefaultLocale="en",r}(w),T=function(e){function t(t,r){return void 0===r&&(r=!1),e.call(this,t,r)||this}return u(t,e),t.prototype.locale=function(){return e.prototype.locale.call(this)},t.prototype.timezone=function(){return e.prototype.timezone.call(this)},t}(E),O=function(){function e(e,t,r){void 0===r&&(r=!1),this._key=e,this._value=t,this.isDecl=r,this._matchArrayIdx=0}return e.fromMap=function(r){var n=new Array;return t.MapWrapper.iterable(r).forEach(function(t,r){n.push(new e(r,t,!1))}),n},Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.bindToKeyData=function(e){this._matchArrayIdx=e._id,this._matchValue=e.matchValue(this._value)},e.prototype.matches=function(e){if(t.isBlank(this._matchValue))return!0;var r=e[this._matchArrayIdx];return!!t.isPresent(r)&&r.matches(this._matchValue)},e.prototype.toString=function(){var e=new t.StringJoiner([]);return e.add(this.key),e.add("="),e.add(this._value.toString()),e.add("("),e.add(this.isDecl+""),e.add(")"),e.add("[ "),e.add(this._matchArrayIdx+"]"),e.toString()},e}(),j=function(){function e(e,t,r,n){void 0===r&&(r=-1),void 0===n&&(n=-1),this._selectors=e,this._properties=t,this._rank=r,this._lineNumber=n,this.keyMatchesMask=0,this.keyIndexedMask=0,this.keyAntiMask=0}return e.merge=function(e,r,n,i){var o=0;return t.MapWrapper.iterable(r).forEach(function(r,a){var s=e.managerForProperty(a),l=n.get(a),c=t.isPresent(i)&&a===i,u=s.mergeProperty(a,l,r,c);if(u!==l){n.set(a,u);var p=s._keyDataToSet;if(t.isPresent(p)){var _=t.shiftLeft(1,p._id);0==(_&o)&&n instanceof U&&(o|=_,n.addContextKey(s))}}}),o},e.prototype.matches=function(e){try{for(var t=p(this._selectors),r=t.next();!r.done;r=t.next()){if(!r.value.matches(e))return!1}}catch(o){n={error:o}}finally{try{r&&!r.done&&(i=t["return"])&&i.call(t)}finally{if(n)throw n.error}}return!0;var n,i},e.prototype.apply=function(t,r,n){return this._rank===Number.MIN_VALUE?0:e.merge(t,this._properties,r,n)},e.prototype.disable=function(){this._rank=Number.MIN_VALUE},e.prototype.disabled=function(){return this._rank===Number.MIN_VALUE},Object.defineProperty(e.prototype,"lineNumber",{get:function(){return this._lineNumber},set:function(e){this._lineNumber=e},enumerable:!0,configurable:!0}),e.prototype.location=function(){var e=t.isPresent(this._ruleSet)?this._ruleSet.filePath:"Unknow";return this._lineNumber>=0?new t.StringJoiner([e,":",this._lineNumber+""]).toString():e},Object.defineProperty(e.prototype,"selectors",{get:function(){return this._selectors},set:function(e){this._selectors=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this._properties},set:function(e){this._properties=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this._rank},set:function(e){this._rank=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ruleSet",{get:function(){return this._ruleSet},set:function(e){this._ruleSet=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),e.prototype.isEditable=function(){return null!==this._ruleSet&&this._ruleSet.editableStart>0&&this._id>=this._ruleSet.editableStart},e.prototype.createDecl=function(){var r=this._selectors,n=r[r.length-1],i=this.convertKeyOverrides(r.slice(0,r.length-1));t.isBlank(this._properties)&&(this._properties=new Map);try{for(var o=p(r),a=o.next();!a.done;a=o.next()){var s=a.value;t.isArray(s.value)||this._properties.set(s.key,s.value)}}catch(m){y={error:m}}finally{try{a&&!a.done&&(h=o["return"])&&h.call(o)}finally{if(y)throw y.error}}this._properties.set(V.DeclRule,new N(this));var l=!1;try{for(var c=p(i),u=c.next();!u.done;u=c.next()){(s=u.value).key===n.key&&(l=!0)}}catch(k){d={error:k}}finally{try{u&&!u.done&&(v=c["return"])&&v.call(c)}finally{if(d)throw d.error}}if(!l){var _=V.overrideKeyForKey(n.key);i.unshift(new O(_,V.NullMarker))}i.push(new O(V.KeyDeclare,n.key));var y,h,d,v,f=new Map;return f.set(n.key,n.value),new e(i,f,0,-1)},e.prototype.convertKeyOverrides=function(e){for(var t=e,r=e.length,n=0;n<r;n++){for(var i=e[n],o=n+1;o<r;o++){if(e[o].key===i.key){t===e&&(t=e.slice(0,n)),i=new O(V.overrideKeyForKey(i.key),i.value);break}}t!==e&&t.push(i)}return t},e.prototype.toString=function(){var e=new t.StringJoiner(["<Rule ["]);return e.add(this._rank+"] "),t.isBlank(this.selectors)?e.add("null, null --\x3e null >"):(e.add(t.ListWrapper.toString(this._selectors)),e.add(" -> "),this._properties?(this._properties.has("declRule"),e.add(t.MapWrapper.toString(this._properties)+" >")):e.add("[,] >"),e.add("[ "),e.add(this.keyIndexedMask+", "),e.add(this.keyAntiMask+", "),e.add(this.keyMatchesMask+""),e.add(" ]")),e.toString()},e.prototype._checkRule=function(e,r){var n=this;t.ListWrapper.forEachWithIndex(this.selectors,function(i,o){var a=e.get(i.key),s=r.keyData(i.key);t.isPresent(s._transformer)&&(a=s._transformer.tranformForMatch(a)),t.isPresent(a)&&(V.KeyAny===i.value&&t.BooleanWrapper.boleanValue(a)||V.objectEquals(a,i.value)||t.isArray(i.value)&&i.value.indexOf(a)>-1||t.isArray(i.value)&&a.indexOf(i.value)>-1)||t.print("Possible bad rule match!  Rule: %s; selector: %s, context val: %s"+n+" "+i+" "+a)})},e}(),N=function(){return function(e){this.rule=e}}(),V=function(){function e(){this._rules=new Array,this._ruleCount=0,this._testRules=new Map,this._nextKeyId=0,this._ruleSetGeneration=0,this._keyData=new Map,this._keyDatasById=new Array(e.MaxKeyDatas),this._MatchToPropsCache=new r.Dictionary,this._PropertyMapUniquer=new r.Dictionary,this._identityCache=new r.Dictionary,this._managerForProperty=new Map,this._declareKeyMask=0,e.PropertyMerger_DeclareList=new J,e.PropertyMerger_Traits=new X,e.PropertyMerger_List=new $,e.Transformer_KeyPresent=new ne,this._declareKeyMask=this.keyData(e.KeyDeclare).maskValue(),this.registerPropertyMerger(e.KeyTrait,e.PropertyMerger_Traits);var t=new j(null,null,0,0);t.disable(),this._rules[0]=t,this._ruleCount=1}return e.booleanValue=function(e){return t.BooleanWrapper.boleanValue(e)},e.toList=function(e){return t.isArray(e)?e:[e]},e.objectEquals=function(e,r){return!(!t.isBlank(e)||!t.isBlank(r))||!t.isBlank(e)&&!t.isBlank(r)&&t.equals(e,r)},e.overrideKeyForKey=function(e){return e+"_o"},e.addTraits=function(r,n){var i=n.get(e.KeyTrait);t.isBlank(i)?n.set(e.KeyTrait,r):(t.ListWrapper.addAll(i,r),n.set(e.KeyTrait,i))},e.addTrait=function(r,n){var i=n.get(e.KeyTrait);t.isBlank(i)?n.set(e.KeyTrait,e.toList(r)):(i.push(r),n.set(e.KeyTrait,i))},e.className=function(e){return t.isStringMap(e)&&(t.isEntity(e)||t.isValue(e))?e.className():t.isStringMap(e)?t.objectToName(e):t.isFunction(e)?e.name:e},e.prototype.registerLoader=function(e){this._ruleLoader=e},e.prototype.addRule=function(e){var r=e.selectors;if(r.length>0&&r[r.length-1].isDecl){var n=e.createDecl();this._addRule(n,!0)}t.isPresent(e.properties)&&(e._selectors=e.convertKeyOverrides(e._selectors),this._addRule(e,!0))},e.prototype._addToRules=function(e,t){this._rules[t]=e},e.prototype._addRule=function(r,n){t.assert(t.isPresent(this._currentRuleSet),"Attempt to add rule without current RuleSet");var i,o,a=r._selectors,s=this._currentRuleSet.allocateNextRuleEntry();r.id=s,0===r.rank&&(r.rank=this._currentRuleSet._rank++),r.ruleSet=this._currentRuleSet,this._addToRules(r,s);for(var l=this.declareKeyMask,c=0,u=0,_=0,y=a.length,h=e._UsePartialIndexing?this.bestSelectorToIndex(a):null,d=y-1;d>=0;d--){var v=a[d],f=null===h||v===h,m=(B=this.keyData(v.key)).maskValue();if(this.isNullMarker(v.value))_|=m;else{if(f||e._DebugDoubleCheckMatches){if(t.isArray(v.value))try{for(var k=p(v.value),g=k.next();!g.done;g=k.next()){var b=g.value;B.addEntry(b,s)}}catch(F){D={error:F}}finally{try{g&&!g.done&&(C=k["return"])&&C.call(k)}finally{if(D)throw D.error}}else B.addEntry(v.value,s);f&&(u|=t.shiftLeft(1,B.id))}f||v.bindToKeyData(B),c|=m,B.isPropertyScope&&t.isBlank(i)&&(i=B),0!=(m&l)&&(o=v.value)}}var D,C,P=t.isPresent(o),x=t.isPresent(o)&&!this.keyData(o).isPropertyScope;if((!P||x)&&(P||(_|=l),t.isPresent(i)&&n)){var M=r.properties.get(e.KeyTrait);if(t.isPresent(M)){var S=i._key+"_trait",w=t.MapWrapper.createEmpty();w.set(S,M);var A=new j(r._selectors,w,r.rank,r.lineNumber);this._addRule(A,!1)}r._selectors=a.slice(0);var K=new O(e.ScopeKey,i.key);r.selectors.push(K);var B=this.keyData(e.ScopeKey);e._UsePartialIndexing&&!e._DebugDoubleCheckMatches||(B.addEntry(i._key,s),u|=t.shiftLeft(1,B._id)),K.bindToKeyData(B),c|=t.shiftLeft(1,B._id)}r.keyMatchesMask=c,r.keyIndexedMask=u,r.keyAntiMask=_},e.prototype.bestSelectorToIndex=function(e){var t,r,n,i=Number.MIN_VALUE,o=0;try{for(var a=p(e),s=a.next();!s.done;s=a.next()){var l=s.value,c=this.selectivityRank(l)+o++;c>i&&(t=l,i=c)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=a["return"])&&n.call(a)}finally{if(r)throw r.error}}return t},e.prototype.selectivityRank=function(r){var n=1,i=r.value;return t.isPresent(i)&&e.KeyAny!==i&&(n+=t.isBoolean(i)?1:9),this.keyData(r.key).isPropertyScope&&(n*=5),n},e.prototype._editingRuleEnd=function(){return Math.max(this._currentRuleSet.end,this._ruleCount)},e.prototype._addRuleAndReturnExtras=function(e){var r,n=this._editingRuleEnd();this.addRule(e);for(var i=n,o=this._editingRuleEnd();i<o;i++){var a=this._rules[i];a!==e&&(t.isBlank(r)&&(r=new Array),r.push(a))}return r},e.prototype._updateEditedRule=function(r,n){var i=new j(null,null,0,0);if(i.disable(),this._rules[r.id]=i,t.isPresent(n))try{for(var o=p(n),a=o.next();!a.done;a=o.next()){a.value.disable()}}catch(u){s={error:u}}finally{try{a&&!a.done&&(l=o["return"])&&l.call(o)}finally{if(s)throw s.error}}var s,l,c=r.selectors;return t.isPresent(c)&&c.length>0&&t.ListWrapper.last(c).key===e.ScopeKey&&t.ListWrapper.removeAt(c,c.length),n=this._addRuleAndReturnExtras(r),this.invalidateRules(),n},e.prototype.scopeKeyForSelector=function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];if(this.keyData(r.key).isPropertyScope)return r.key}return null},e.prototype.addRuleFromSelectorMap=function(e,t){this.addRuleFromSelectorMapWithRank(e,t,0)},e.prototype.addRuleFromSelectorMapWithRank=function(e,t,r){var n=new j(O.fromMap(e),t,0,-1);0!==r&&(n.rank=r),this.addRule(n)},e.prototype.addRules=function(e,r){var n,i,o,a;if(t.MapWrapper.iterable(e).forEach(function(e,t){"props"===t?n=e:"rules"===t?i=e:r.push(new O(t,e))}),t.isPresent(n)&&this.addRule(new j(r,n,0)),t.isPresent(i))try{for(var s=p(i),l=s.next();!l.done;l=s.next()){var c=l.value;this.addRules(c,r)}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=s["return"])&&a.call(s)}finally{if(o)throw o.error}}},e.prototype._loadRules=function(e,r,n){var i=this;void 0===r&&(r="system"),void 0===n&&(n=!0);try{t.isPresent(this._ruleLoader)&&this._ruleLoader.loadRules(this,e,r,function(e){return i.addRule(e)})}catch(o){throw this.endRuleSet().disableRules(),new Error("Error loading rule: "+o)}},e.prototype.loadRules=function(e){this._loadRulesWithRuleSet("StringLiteral",e,0),this.endRuleSet()},e.prototype._loadRulesWithRuleSet=function(e,t,r){this.beginRuleSetWithRank(r,e);try{this._loadRules(t)}catch(n){throw this.endRuleSet().disableRules(),new Error("Error loading rule: "+n)}},e.prototype.loadUserRule=function(e,r){return t.unimplemented()},e.prototype.parsePropertyAssignment=function(e,r){return t.unimplemented()},e.prototype.clearCaches=function(){this._MatchToPropsCache=new r.Dictionary,this._PropertyMapUniquer=new r.Dictionary,this._identityCache=new r.Dictionary},e.prototype.isTraitExportRule=function(e){if(t.isBlank(e.properties)||e||1===e.properties.size){var r=Array.from(e.properties.keys())[0];return t.StringWrapper.endsWidth(r,"_trait")}return!1},e.prototype.beginRuleSet=function(e){this.beginRuleSetWithRank(this._ruleCount,e)},e.prototype.beginRuleSetWithRank=function(e,r){try{t.assert(t.isBlank(this._currentRuleSet),"Can t start new rule set while one in progress"),this._currentRuleSet=new ee(this),this._currentRuleSet._start=this._ruleCount,this._currentRuleSet._end=this._ruleCount,this._currentRuleSet._rank=e,this._currentRuleSet._filePath=r}catch(n){throw n}},e.prototype.beginReplacementRuleSet=function(e){var t=e.startRank();this.beginRuleSetWithRank(this._ruleCount,e._filePath),this._currentRuleSet._rank=t},e.prototype.endRuleSet=function(){t.assert(t.isPresent(this._currentRuleSet),"No rule set progress");var e=this._currentRuleSet;return this._ruleCount<e._end&&(this._ruleCount=e._end),this._currentRuleSet=null,this._ruleSetGeneration++,e},Object.defineProperty(e.prototype,"ruleSetGeneration",{get:function(){return this._ruleSetGeneration},enumerable:!0,configurable:!0}),e.prototype.invalidateRules=function(){this._ruleSetGeneration++,this.clearCaches()},e.prototype.newContext=function(){return new w(this)},Object.defineProperty(e.prototype,"declareKeyMask",{get:function(){return this._declareKeyMask},enumerable:!0,configurable:!0}),e.prototype.touch=function(e,t){var r=this.newContext();r.push(),r.set(e,t),r.allProperties(),r.pop()},e.prototype.transformValue=function(e,r){var n=this._keyData.get(e);return t.isPresent(n)&&t.isPresent(n._transformer)&&(r=n._transformer.tranformForMatch(r)),r},e.prototype.match=function(e,r,n){var i=this._keyData.get(e);if(t.isBlank(i))return n;t.shiftLeft(1,i._id);return new d(this,i,r,n)},e.prototype.unionOverrideMatch=function(r,n,i){var o=this._keyData.get(e.overrideKeyForKey(r));return t.isBlank(o)?i:new v(this,o,n,i)},e.prototype.newPropertiesMap=function(){return new U},e.prototype.propertiesForMatch=function(r){var n=this._MatchToPropsCache.getValue(r);if(t.isPresent(n))return n;n=this.newPropertiesMap();var i=r.filteredMatches();if(t.isBlank(i))return n;for(var o=i[0],a=new Array(o),s=0;s<o;s++)a[s]=this._rules[i[s+1]];t.ListWrapper.sort(a,function(e,t){return e.rank-t.rank});var l=0!=(this._declareKeyMask&r.keysMatchedMask)?r.valueForKey(e.KeyDeclare):null;for(var c in a)a[c].apply(this,n,l);return n.awakeProperties(),this._MatchToPropsCache.setValue(r.immutableCopy(),n),n},e.prototype.keyData=function(r){var n=this._keyData.get(r);if(t.isBlank(n)){var i=this._nextKeyId;i>=e.MaxKeyDatas-1&&t.print("Exceeded maximum number of context keys"),this._nextKeyId++,n=new Z(r,i),this._keyDatasById[i]=n,this._keyData.set(r,n)}return n},e.prototype._keysInMask=function(e){for(var r=[],n=0;0!==e;)0!=(1&e)&&r.push(this._keyDatasById[n]._key),n++,e=t.shiftRight(e,1);return r},e.prototype.registerKeyInitObserver=function(e,t){this.keyData(e).addObserver(t)},e.prototype.registerValueTransformerForKey=function(e,t){this.keyData(e)._transformer=t},Object.defineProperty(e.prototype,"identityCache",{get:function(){return this._identityCache},enumerable:!0,configurable:!0}),e.prototype.newMatchArray=function(){return[]},e.prototype.matchArrayAssign=function(e,r,n){var i=r._id,o=e[i];t.isPresent(o)&&(n=o.updateByAdding(n)),e[i]=n},e.prototype.propertyWillDoMerge=function(e,r){var n=this.mergerForProperty(e);return this.isPropertyMergerIsChaining(n)||t.isPresent(r)&&r instanceof Map},e.prototype.managerForProperty=function(e){var r=this._managerForProperty.get(e);return t.isBlank(r)&&(r=new z(e),this._managerForProperty.set(e,r)),r},e.prototype.mirrorPropertyToContext=function(e,t){var r=this.keyData(t);this.managerForProperty(e)._keyDataToSet=r},e.prototype.defineKeyAsPropertyScope=function(t){this.keyData(t).isPropertyScope=!0;var r=t+"_trait";this.mirrorPropertyToContext(r,r),this.registerPropertyMerger(r,e.PropertyMerger_DeclareList)},e.prototype.isPropertyScopeKey=function(t){return e.ScopeKey===t},e.prototype.registerPropertyMerger=function(e,r){t.isBlank(r._meta)&&(r._meta=this),this.managerForProperty(e)._merger=r},e.prototype.mergerForProperty=function(e){return this.managerForProperty(e)._merger},e.prototype.isPropertyMergerIsChaining=function(e){return t.isPresent(e.isPropMergerIsChainingMark)&&e.isPropMergerIsChainingMark},e.prototype.groupForTrait=function(e){return"default"},e.prototype._logRuleStats=function(){var e=0,r=this._keyData.keys(),n=[];try{for(var i=p(Array.from(r)),o=i.next();!o.done;o=i.next()){var a=o.value,s=this._keyData.get(a),l=s.ruleVecs.values();try{for(var c=p(l),u=c.next();!u.done;u=c.next()){var _=u.value;e+=(b=new W(s._key,_._value,t.isPresent(_._arr)?_._arr[0]:0)).count,n.push(b)}}catch(D){v={error:D}}finally{try{u&&!u.done&&(f=c["return"])&&f.call(c)}finally{if(v)throw v.error}}}}catch(C){h={error:C}}finally{try{o&&!o.done&&(d=i["return"])&&d.call(i)}finally{if(h)throw h.error}}t.ListWrapper.sort(n,function(e,t){return t.count-e.count});var h,d,v,f,m=new t.StringJoiner([]),k=Math.min(10,n.length);m.add("Total index entries comparisons performed: "+y._Debug_ElementProcessCount),m.add("\nTotal index entries: "+e),m.add("\nTop  keys/values: "+k);for(var g=0;g<k;g++){var b=n[g];m.add("     "+b.key+"  = "+b.value+" : "+b.count+" entries"),m.add("\n")}t.print(m.toString())},e.prototype.toString=function(){return"Meta"},e.prototype.isNullMarker=function(e){return t.isPresent(e)&&e.markernull},e.prototype.addTestUserRule=function(e,t){this._testRules.set(e,t)},e.KeyAny="*",e.KeyDeclare="declare",e.KeyTrait="trait",e.LowRulePriority=-1e5,e.SystemRulePriority=-2e5,e.ClassRulePriority=-1e5,e.TemplateRulePriority=1e5,e.EditorRulePriority=2e5,e.MaxKeyDatas=64,e.NullMarker={markernull:!0},e.ScopeKey="scopeKey",e.DeclRule="declRule",e._UsePartialIndexing=!0,e._DebugDoubleCheckMatches=!1,e.PropertyMerger_DeclareList=null,e.PropertyMerger_Traits=null,e.PropertyMerger_List=null,e.Transformer_KeyPresent=null,e}(),W=function(){return function(e,t,r){this.key=e,this.value=t,this.count=r}}(),z=function(){function e(e){this._name=e}return e.prototype.mergeProperty=function(e,r,n,i){if(t.isBlank(r))return n;if(n instanceof G)return n.value();if(t.isBlank(this._merger)){if(r instanceof Map&&t.isPresent(n)&&n instanceof Map){var o=t.MapWrapper.clone(r);n=t.MapWrapper.mergeMapIntoMapWithObject(o,n,!0)}return n}return this._merger instanceof q||!(r instanceof k||n instanceof k)?this._merger.merge(r,n,i):new M(this._merger,r,n)},e}(),G=function(){function e(e){this._value=e}return e.prototype.value=function(){return"null"===this._value?null:this._value},e.prototype.toString=function(){return t.isPresent(this._value)?this._value.toString()+"!":"null!"},e}(),Z=function(){function e(e,t){this._key=e,this._id=t,this._isPropertyScope=!1,this._ruleVecs=new r.Dictionary,this._any=this.get(V.KeyAny)}return e.prototype.maskValue=function(){return t.shiftLeft(1,this._id)},e.prototype.get=function(e){t.isBlank(e)?e=V.NullMarker:t.isPresent(this._transformer)&&(e=this._transformer.tranformForMatch(e));var r=this._ruleVecs.getValue(e);return t.isBlank(r)&&(r=new te(e),t.isPresent(e)&&!t.BooleanWrapper.isFalse(e)&&(r._parent=this._any),this._ruleVecs.setValue(e,r)),r},e.prototype.matchValue=function(e){var r=this;if(t.isArray(e)){var n=e;if(1===n.length)return this.get(n[0]);var i=new re;return t.ListWrapper.forEachWithIndex(n,function(e,t){i.data.push(r.get(e))}),i}return this.get(e)},e.prototype.addEntry=function(e,t){var r=this.get(e),n=r._arr,i=y.addInt(n,t);n!==i&&(r._arr=i)},e.prototype.lookup=function(e,r){var n=this,i=this.get(r);if(!i._read&&t.isPresent(this._observers))try{i._read||t.isPresent(r)&&t.ListWrapper.forEachWithIndex(this._observers,function(t,i){t.notify(e,n._key,r)}),i._read=!0}finally{}return i.checkParent(),i._arr},e.prototype.setParent=function(e,t){var r=this.get(t);this.get(e)._parent=r},e.prototype.parent=function(e){return this.get(e)._parent._value},e.prototype.addObserver=function(e){t.isBlank(this._observers)&&(this._observers=new Array),this._observers.push(e)},Object.defineProperty(e.prototype,"isPropertyScope",{get:function(){return this._isPropertyScope},set:function(e){this._isPropertyScope=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ruleVecs",{get:function(){return this._ruleVecs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observers",{get:function(){return this._observers},enumerable:!0,configurable:!0}),e}(),U=function(){function e(e){t.isPresent(e)?this._map=new Map(e):this._map=new Map}return e.prototype.get=function(e){return this._map.get(e)},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.clear=function(){this._map.clear()},e.prototype.set=function(e,t){return this._map.set(e,t)},e.prototype["delete"]=function(e){return this._map["delete"](e)},e.prototype.forEach=function(e,t){this._map.forEach(e)},e.prototype.has=function(e){return this._map.has(e)},e.prototype[Symbol.iterator]=function(){return this._map[Symbol.iterator]()},e.prototype.entries=function(){return this._map.entries()},Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.awakeProperties=function(){var e=this;t.MapWrapper.iterable(this).forEach(function(t,r){if(ie(t)){var n=t.awakeForPropertyMap(e);n!==t&&e.set(r,n)}})},e.prototype.addContextKey=function(e){t.isBlank(this._contextPropertiesUpdated)&&(this._contextPropertiesUpdated=new Array),this._contextPropertiesUpdated.push(e)},Object.defineProperty(e.prototype,"contextKeysUpdated",{get:function(){return this._contextPropertiesUpdated},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e=this,r=new t.StringJoiner(["PropertyMap:"]);return r.add(this.size+","),t.MapWrapper.iterable(this).forEach(function(t,n){ie(t)&&(t.awakeForPropertyMap(e)!==t&&(r.add(n+":"+t),r.add(", ")))}),r.toString()},e}(),q=function(){function e(){}return e.prototype.merge=function(e,r,n){return t.unimplemented()},e.prototype.toString=function(){return"PropertyMergerDynamic"},e}(),H=function(){function e(){}return e.prototype.merge=function(e,t,r){return t},e.prototype.toString=function(){return"OVERWRITE"},e}(),$=function(){function e(){}return e.prototype.merge=function(e,r,n){if(!t.isArray(e)&&!t.isArray(r)&&V.objectEquals(e,r))return e;var i=V.toList(e),o=V.toList(r),a=t.ListWrapper.clone(i);return t.ListWrapper.addElementsIfAbsent(a,o),a},e}(),J=function(e){function r(){return e.call(this)||this}return u(r,e),r.prototype.merge=function(e,r,n){if(!n)return r;if(!t.isArray(e)&&!t.isArray(r)&&V.objectEquals(e,r))return e;var i=[];return t.ListWrapper.addElementsIfAbsent(i,V.toList(e)),t.ListWrapper.addElementsIfAbsent(i,V.toList(r)),i},r.prototype.toString=function(){return"PropertyMergerDeclareList"},r}(q),X=function(e){function r(){return e.call(this)||this}return u(r,e),r.prototype.merge=function(r,n,i){if(i)return e.prototype.merge.call(this,r,n,i);if(!t.isArray(r)&&!t.isArray(n)&&V.objectEquals(r,n))return r;var o,a,s,l,c=V.toList(r),u=V.toList(n),_=[];try{for(var y=p(c),h=y.next();!h.done;h=y.next()){var d=h.value;d instanceof G&&(d=d.value());var v=!0,f=this._meta.groupForTrait(d);if(t.isPresent(f))try{for(var m=p(u),k=m.next();!k.done;k=m.next()){var g=k.value;if(g instanceof G&&(g=g.value()),f===this._meta.groupForTrait(g)){v=!1;break}}}catch(b){s={error:b}}finally{try{k&&!k.done&&(l=m["return"])&&l.call(m)}finally{if(s)throw s.error}}v&&_.push(d)}}catch(D){o={error:D}}finally{try{h&&!h.done&&(a=y["return"])&&a.call(y)}finally{if(o)throw o.error}}return t.ListWrapper.addElementsIfAbsent(_,u),_},r.prototype.toString=function(){return"PropertyMergerDeclareListForTrait"},r}(J),Q=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.isPropMergerIsChainingMark=!0,t}return u(r,e),r.prototype.merge=function(e,r,n){return t.isBlank(r)?null:!(t.isBoolean(e)&&!t.BooleanWrapper.boleanValue(e)||t.isBoolean(r)&&!t.BooleanWrapper.boleanValue(r))&&(t.isBoolean(e)&&t.BooleanWrapper.boleanValue(e)?r instanceof k?r:t.BooleanWrapper.boleanValue(r):t.isBoolean(r)&&t.BooleanWrapper.boleanValue(r)?e instanceof k?e:t.BooleanWrapper.boleanValue(r):e instanceof k||r instanceof k?new M(this,e,r):t.BooleanWrapper.boleanValue(e)&&t.BooleanWrapper.boleanValue(r))},r.prototype.toString=function(){return"AND"},r}(q),Y=function(){function e(){this.isPropMergerIsChainingMark=!0}return e.prototype.merge=function(e,r,n){return t.isString(r)||t.isBoolean(r)&&t.BooleanWrapper.isFalse(r)?r:e},e.prototype.toString=function(){return"VALIDATE"},e}(),ee=function(){function e(e){this._meta=e,this._start=0,this._end=0,this._editableStart=-1,this._rank=0}return e.prototype.disableRules=function(){for(var e=this._start;e<this._end;e++)this._meta._rules[e].disable();this._meta.clearCaches()},Object.defineProperty(e.prototype,"filePath",{get:function(){return this._filePath},enumerable:!0,configurable:!0}),e.prototype.rules=function(e){for(var t=[],r=e?-1===this._editableStart?this._end:this._editableStart:this._start;r<this._end;r++){var n=this._meta._rules[r];n.disabled()||this._meta.isTraitExportRule(n)||t.push(n)}return t},e.prototype.startRank=function(){return this._start<this._meta._ruleCount?this._meta._rules[this._start].rank:this._rank-(this._end-this._start)},e.prototype.allocateNextRuleEntry=function(){return this._meta._ruleCount>this._end?this._meta._ruleCount++:this._end++},Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editableStart",{get:function(){return this._editableStart},enumerable:!0,configurable:!0}),e}(),te=function(){function e(e){this._read=!1,this._parentSize=0,this._value=e}return e.prototype.checkParent=function(){if(t.isPresent(this._parent)){this._parent.checkParent();var e=this._parent._arr;t.isPresent(e)&&e[0]!==this._parentSize&&(this._arr=y.union(this._arr,e),this._parentSize=e[0])}},e.prototype.matches=function(r){return r instanceof e?r===this||t.isPresent(this._parent)&&this._parent.matches(r):r.matches(this)},e.prototype.updateByAdding=function(e){var t=new re;return t.data.push(this),t.updateByAdding(e)},e}(),re=function(){function e(){this.data=[]}return e.prototype.matches=function(t){if(t instanceof e){for(var r=0;r<this.data.length;r++)if(t.matches(this.data[r]))return!0}else for(r=0;r<this.data.length;r++)if(this.data[r].matches(t))return!0;return!1},e.prototype.updateByAdding=function(r){if(r instanceof e){var n=r;t.ListWrapper.addAll(this.data,n.data)}else this.data.push(r);return this},e}(),ne=function(){function e(){}return e.prototype.tranformForMatch=function(e){return!(!t.isPresent(e)||t.BooleanWrapper.isFalse(e))},e}();function ie(e){return t.isPresent(e)&&t.isPresent(e.propertyAwaking)}
/**
     * @license
     * Copyright 2017 SAP Ariba
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     * http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     *
     * Based on original work: MetaUI: Craig Federighi (2008)
     *
     */var oe=function(){return function(e,t,r){this.name=e,this.properties=t,this.hidden=r}}(),ae=function(e){function r(){var t=e.call(this)||this;return t._traitToGroupGeneration=-1,t.registerKeyInitObserver(r.KeyClass,new se),t.registerKeyInitObserver(r.KeyType,new le),t.defineKeyAsPropertyScope(r.KeyField),t.defineKeyAsPropertyScope(r.KeyAction),t.defineKeyAsPropertyScope(r.KeyActionCategory),t.defineKeyAsPropertyScope(r.KeyClass),t.registerPropertyMerger(r.KeyVisible,new Q),t.registerPropertyMerger(r.KeyEditable,new Q),t.registerPropertyMerger(r.KeyValid,new ue),t.registerPropertyMerger(r.KeyClass,V.PropertyMerger_DeclareList),t.registerPropertyMerger(r.KeyField,V.PropertyMerger_DeclareList),t.registerPropertyMerger(r.KeyAction,V.PropertyMerger_DeclareList),t.registerPropertyMerger(r.KeyActionCategory,V.PropertyMerger_DeclareList),t.registerPropertyMerger(r.KeyTraitGroup,V.PropertyMerger_DeclareList),t.mirrorPropertyToContext(r.KeyClass,r.KeyClass),t.mirrorPropertyToContext(r.KeyType,r.KeyType),t.mirrorPropertyToContext(r.KeyElementType,r.KeyElementType),t.mirrorPropertyToContext(r.KeyTrait,V.KeyTrait),t.mirrorPropertyToContext(r.KeyEditable,r.KeyEditable),t.registerValueTransformerForKey(r.KeyObject,V.Transformer_KeyPresent),t}return u(r,e),r.validationError=function(e){var n=e.propertyForKey(r.KeyValid);return t.isBlank(n)?null:t.isBoolean(n)?t.BooleanWrapper.boleanValue(n)?null:"Invalid entry":n.toString()},r.prototype.newContext=function(){return new E(this,!1)},r.prototype.newPropertiesMap=function(){return new ce},r.prototype.itemNames=function(e,t){e.push(),e.set(r.KeyDeclare,t);var n=e.listPropertyForKey(t);return e.pop(),n},r.prototype.itemProperties=function(e,t,r){return this.itemPropertiesForNames(e,t,this.itemNames(e,t),r)},r.prototype.itemPropertiesForNames=function(e,n,i,o){var a,s,l=[];try{for(var c=p(i),u=c.next();!u.done;u=c.next()){var _=u.value;e.push(),e.set(n,_);var y=e.allProperties().get(r.KeyVisible),h=e.staticallyResolveValue(y),d=t.isBlank(h)||t.BooleanWrapper.isFalse(h);d&&o||l.push(new oe(_,e.allProperties(),d)),e.pop()}}catch(v){a={error:v}}finally{try{u&&!u.done&&(s=c["return"])&&s.call(c)}finally{if(a)throw a.error}}return l},r.prototype.groupForTrait=function(e){if(null==this._traitToGroup||this._traitToGroupGeneration<this.ruleSetGeneration){this._traitToGroupGeneration=this.ruleSetGeneration,this._traitToGroup=new Map;var t=this.newContext();try{for(var n=p(this.itemNames(t,r.KeyTraitGroup)),i=n.next();!i.done;i=n.next()){var o=i.value;t.push(),t.set(r.KeyTraitGroup,o);try{for(var a=p(this.itemNames(t,r.KeyTrait)),s=a.next();!s.done;s=a.next()){var l=s.value;this._traitToGroup.set(l,o)}}catch(h){_={error:h}}finally{try{s&&!s.done&&(y=a["return"])&&y.call(a)}finally{if(_)throw _.error}}t.pop()}}catch(d){c={error:d}}finally{try{i&&!i.done&&(u=n["return"])&&u.call(n)}finally{if(c)throw c.error}}}return this._traitToGroup.get(e);var c,u,_,y},Object.defineProperty(r.prototype,"injector",{get:function(){return this._injector},set:function(e){this._injector=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"componentRegistry",{get:function(){return this._componentRegistry},set:function(e){this._componentRegistry=e},enumerable:!0,configurable:!0}),r.KeyClass="class",r.KeyField="field",r.KeyAction="action",r.KeyActionCategory="actionCategory",r.KeyObject="object",r.KeyValue="value",r.KeyType="type",r.KeyElementType="elementType",r.KeyTraitGroup="traitGroup",r.KeyVisible="visible",r.KeyEditable="editable",r.KeyValid="valid",r.KeyRank="rank",r.DefaultActionCategory="General",r._FieldPathNullMarker=new t.FieldPath("null"),r}(V),se=function(){function e(){}return e.prototype.notify=function(e,r,n){var i;this._meta=e;var o=this._meta.componentRegistry;t.assert(t.isPresent(o),"Component registry is not initialized");var a=null;if(t.isString(n)&&(a=o.nameToType.get(n))&&t.isPresent(a))i=new a;else if(t.isBlank(a))return;t.assert(V.className(i)===n,"Trying to process and register a class that does not exists on Context"),this.registerRulesForClass(i,n)},e.prototype.registerRulesForClass=function(e,t){this._meta.keyData(ae.KeyClass).setParent(t,"Object"),this._meta.beginRuleSet(t);try{var r=[new O(ae.KeyClass,t)],n=this._meta.newPropertiesMap();r[0].isDecl=!0;var i=new j(r,n,ae.ClassRulePriority);this._meta.addRule(i),this.registerRulesForFields(e,t)}finally{this._meta.endRuleSet()}},e.prototype.registerRulesForFields=function(e,r){t.assert(t.isPresent(e.$proto),"Cannot register fields without a $proto method that will expose all the fields");var n,i,o=e.$proto(),a=Object.keys(o),s=0;try{for(var l=p(a),c=l.next();!c.done;c=l.next()){var u=c.value,_=o[u].constructor.name,y=new Map;if(y.set(ae.KeyField,u),y.set(ae.KeyType,_),y.set(ae.KeyVisible,!0),t.isArray(o[u])){t.assert(o[u].length>0," Cannot register type[array] and its type without properly initialized prototype");var h=o[u][0].constructor.name;y.set(ae.KeyElementType,h)}var d=[new O(ae.KeyClass,r),new O(ae.KeyField,u)];d[1].isDecl=!0,y.set(ae.KeyRank,10*(1+s++));var v=new j(d,y,ae.ClassRulePriority);this._meta.addRule(v)}}catch(f){n={error:f}}finally{try{c&&!c.done&&(i=l["return"])&&i.call(l)}finally{if(n)throw n.error}}},e}(),le=function(){function e(){}return e.prototype.notify=function(e,t,r){},e}(),ce=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return u(r,e),Object.defineProperty(r.prototype,"fieldPath",{get:function(){if(t.isBlank(this._fieldPath)){var e=this.get(ae.KeyValue),r=this.get(ae.KeyField);this._fieldPath=t.isPresent(r)&&t.isBlank(e)?new t.FieldPath(r):ae._FieldPathNullMarker}return this._fieldPath===ae._FieldPathNullMarker?null:this._fieldPath},enumerable:!0,configurable:!0}),r.prototype.isFieldNullMarker=function(e){return t.isPresent(e)&&"null"===e.path},r}(U),ue=function(){function e(){this.isPropMergerIsChainingMark=!0}return e.prototype.merge=function(e,r,n){return t.isString(r)||t.isBoolean(r)&&t.BooleanWrapper.isFalse(r)?r:e},e.prototype.toString=function(){return"VALIDATE"},e}(),pe={oss:[{_selectors:[{_key:"object",_value:"*",_isDecl:!1}],_properties:{"class":{t:"Expr",v:"Meta.className(object)"}},_rank:0},{_selectors:[{_key:"object",_value:"*",_isDecl:!1},{_key:"declare",_value:"*",_isDecl:!1}],_properties:{"class":{t:"Expr",v:"Meta.className(object)"}},_rank:0},{_selectors:[{_key:"operation",_value:"search",_isDecl:!1}],_properties:{"class":{t:"Expr",v:'values.get("class")'}},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1},{_key:"layout",_value:"*",_isDecl:!1}],_properties:{editing:!0},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{editing:!0},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_properties:{editing:!0},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1},{_key:"action",_value:"*",_isDecl:!1}],_properties:{editing:!0},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1},{_key:"layout",_value:"*",_isDecl:!1}],_properties:{editing:!1},_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{editing:!1},_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_properties:{editing:!1},_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1},{_key:"action",_value:"*",_isDecl:!1}],_properties:{editing:!1},_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_properties:{visible:{t:"SDW",v:'!properties.get("hidden")'}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"editing",_value:!0,_isDecl:!1}],_properties:{editable:!0},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"editing",_value:!1,_isDecl:!1}],_properties:{editable:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"trait",_value:"fiveZones",_isDecl:!0}],_properties:{fiveZoneLayout:!0,zones:["zLeft","zMiddle","zRight","zTop","zBottom","zDetail"]},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"trait",_value:"oneZone",_isDecl:!0}],_properties:{zones:["zLeft","zDetail"]},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"trait",_value:"tableZones",_isDecl:!0}],_properties:{zones:["zMain","zLeft","zRight","zTop","zBottom","zDetail"]},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:["create","edit","view","search"],_isDecl:!1}],_properties:{trait:"fiveZones"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"list",_isDecl:!1}],_properties:{trait:"tableZones"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0},{_key:"trait",_value:"fiveZones",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0},{_key:"trait",_value:"oneZone",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"*",_isDecl:!1}],_properties:{component:"StringComponent",bindings:{value:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"boolean",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"boolean",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"Checkbox"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"boolean",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1}],_properties:{bindings:{formatter:{t:"CFP",v:"formatters.integer"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"InputFieldComponent"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1},{_key:"operation",_value:"search",_isDecl:!1}],_properties:{bindings:{formatter:{t:"CFP",v:"formatters.blankNull.integer"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1}],_properties:{component:"DateAndTimeComponent",bindings:{formatter:"shortDate",showTime:!1}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1},{_key:"fiveZoneLayout",_value:!0,_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1},{_key:"trait",_value:"dateTime",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{bindings:{formatter:"dateTime",showTime:!0}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{destinationClass:{t:"Expr",v:"type"},displayKey:"name",formatter:{t:"CFP",v:"formatters.identifier"},key:{t:"Expr",v:"field"},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1},{_key:"operation",_value:["search","list"],_isDecl:!1}],_properties:{bindings:{type:"Popup"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1},{_key:"trait",_value:"enum",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{multiselect:!0,destinationClass:{t:"Expr",v:'properties.get("enumClass")'},displayKey:"name",formatter:{t:"CFP",v:"formatters.identifier"},key:{t:"Expr",v:"field"},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1},{_key:"operation",_value:["search","list"],_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1},{_key:"trait",_value:"ownedToMany",_isDecl:!0}],_properties:{component:"MetaDetailTable",after:"zDetail"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"FileUploadChooser",bindings:{bytes:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{bindings:{value:{t:"Expr",v:'value ? ("" + value.length + " bytes") : "(none)"'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"FileUploadChooser",bindings:{file:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{bindings:{value:{t:"Expr",v:'value ? value.name : "(none)"'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"InputFieldComponent"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0}],_properties:{after:"zBottom"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"TextAreaComponent",bindings:{rows:10,cols:60}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0},{_key:"operation",_value:["search","list"],_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0}],_properties:{bindings:{escapeUnsafeHtml:!0},after:"zBottom"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"RichTextArea",bindings:{rows:10,cols:60}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0},{_key:"operation",_value:"search",_isDecl:!1}],_properties:{after:"zNone"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0},{_key:"operation",_value:"list",_isDecl:!1}],_properties:{editable:!1,after:"zDetail"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0}],_properties:{bindings:{formatter:{t:"CFP",v:"formatters.hiddenPassword"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"AWPasswordField",bindings:{}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0},{_key:"operation",_value:["search","list"],_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"truncated",_isDecl:!1}],_properties:{component:"TruncateString",bindings:{size:10}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0}],_properties:{contentType:"image/jpeg"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{component:"AWImageData",bindings:{bytes:{t:"CFP",v:"value"},contentType:{t:"Expr",v:'ContentTypeUtils.contentTypeNamed(properties.get("contentType"))'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{bindings:{awcontentLayouts:{_main:"_imgUploadPreview"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Money",_isDecl:!1}],_properties:{component:"CurrencyComponent",bindings:{money:{t:"CFP",v:"value"},currencies:{t:"Expr",v:'properties.get("currencies")'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"layout",_value:"_imgUploadPreview",_isDecl:!1}],_properties:{wrapperComponent:"MetaContext",component:"AWImageData",wrapperBindings:{scopeKey:"field"},bindings:{bytes:{t:"CFP",v:"value"},style:"width:100px",contentType:{t:"Expr",v:'ContentTypeUtils.contentTypeNamed(properties.get("contentType"))'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"derived",_isDecl:!0}],_properties:{editable:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"derived",_isDecl:!0},{_key:"editing",_value:"*",_isDecl:!1}],_properties:{after:"zNone"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"derived",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"searchable",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"searchable",_isDecl:!0},{_key:"operation",_value:"search",_isDecl:!1}],_properties:{visible:!0,editable:{t:"OV",v:"true"},after:{t:"OV",v:"null"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"searchable",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0},{_key:"operation",_value:["edit","create"],_isDecl:!1}],_properties:{required:!0},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0},{_key:"operation",_value:["edit","create"],_isDecl:!1},{_key:"object",_value:"*",_isDecl:!1}],_properties:{valid:{t:"Expr",v:'((value != undefined) && (value != null)) ? true : "Answer required"'}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0},{_key:"operation",_value:["edit","create"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"list",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"list",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{list:{t:"Expr",v:'properties.get("choices")'},type:{t:"Expr",v:'properties.get("chooserStyle")'},key:{t:"Expr",v:'properties.get("field")'},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"list",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"withHoverDetails",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"withHoverDetails",_isDecl:!0},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{component:"HoverCardComponent",bindings:{linkTitle:{t:"CFP",v:"value"},appendContentToBody:!1,ngcontentLayout:"Content"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"withHoverDetails",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"layout",_value:"Content",_isDecl:!0}],_properties:{component:"MetaObjectDetailComponent",bindings:{layout:"Inspect",object:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noCreate",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noCreate",_isDecl:!0},{_key:"operation",_value:"create",_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noCreate",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noSearch",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noSearch",_isDecl:!0},{_key:"operation",_value:"search",_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noSearch",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1},{_key:"trait",_value:"Popup",_isDecl:!0}],_properties:{bindings:{type:"Dropdown"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1},{_key:"trait",_value:"PopupControl",_isDecl:!0}],_properties:{bindings:{type:"PopupControl"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1},{_key:"trait",_value:"Chooser",_isDecl:!0}],_properties:{bindings:{type:"Chooser"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1},{_key:"trait",_value:"PostOnChange",_isDecl:!0}],_properties:{bindings:{}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"bold",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"b"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"italic",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"i"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"heading1",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"h1"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"heading2",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"h2"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"heading3",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"h3"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0},{_key:"trait",_value:"longtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0},{_key:"trait",_value:"richtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0},{_key:"trait",_value:"secret",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0},{_key:"trait",_value:"Popup",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0},{_key:"trait",_value:"PopupControl",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0},{_key:"trait",_value:"Chooser",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"bold",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"italic",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"heading1",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"heading2",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"heading3",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_properties:{visible:{t:"SDW",v:'!properties.get("hidden")'},enabled:!0},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"pageAction",_isDecl:!0}],_properties:{actionResults:{t:"Expr",v:'meta.routingService.routeForPage(properties.get("pageName"))'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"modalComponentPage",_isDecl:!0}],_properties:{pageBindings:{componentName:{t:"Expr",v:'properties.get("componentName")'},title:{t:"Expr",v:'properties.get("title")'}},actionResults:{t:"Expr",v:'meta.compPageWithName("MetaModalPage")'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"modalComponentPanel",_isDecl:!0}],_properties:{pageBindings:{clientPanel:!0,componentName:{t:"Expr",v:'properties.get("componentName")'},title:{t:"Expr",v:'properties.get("title")'}},actionResults:{t:"Expr",v:'meta.compPageWithName("MetaModalPage")'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"messageResults",_isDecl:!0}],_properties:{actionResults:{t:"Expr",v:"var o = (properties.isInstanceAction ? object : ariba.ui.aribaweb.util.AWUtil.classForName(properties.class)), var v = ariba.util.fieldvalue.FieldValue.getFieldValue(o, properties.action), var m = ariba.util.core.Fmt.S(properties.message, v), ariba.ui.widgets.AribaPageContent.setMessage(m, requestContext.session()), null"},message:"Action Performed: %s"},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"instance",_isDecl:!0}],_properties:{isInstanceAction:!0,enabled:{t:"Expr",v:"object != null"}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"filterActions",_value:"instance",_isDecl:!1}],_properties:{visible:{t:"Expr",v:'properties.get("isInstanceAction") == true'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"filterActions",_value:"static",_isDecl:!1}],_properties:{visible:{t:"Expr",v:'!properties.get("isInstanceAction")'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_properties:{zones:["zMain"]},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionButtons",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{defaultStyle:"primary",renderAs:"buttons",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionLinks",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{renderAs:"links",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionMenu",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{renderAs:"menu",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"InstanceActionButtons",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{filterActions:"instance",renderAs:"buttons",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"StaticActionButtons",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{filterActions:"static",renderAs:"buttons",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"Tabs",_isDecl:!0}],_properties:{component:"MetaTabs",visible:!0},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"Sections",_isDecl:!0}],_properties:{component:"MetaSectionsComponent",visible:!0},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"Form",_isDecl:!0}],_properties:{component:"MetaFormComponent",visible:!0},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"Stack",_isDecl:!0}],_properties:{component:"MetaElementListComponent",visible:!0},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"OwnZone",_isDecl:!0}],_properties:{zonePath:{t:"Expr",v:"layout"}},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"pad8",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{style:"padding:8px",tagName:"div"}},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"component",_value:"MetaFormComponent",_isDecl:!1},{_key:"trait",_value:"labelsOnTop",_isDecl:!0}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"layout_trait",_value:"labelsOnTop",_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{bindings:{showLabelsAboveControls:!0}},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0},{_key:"trait",_value:"Tabs",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0},{_key:"trait",_value:"Sections",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0},{_key:"trait",_value:"Form",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0},{_key:"trait",_value:"Stack",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"layout",_value:["Inspect","SearchForm"],_isDecl:!1}],_properties:{trait:"Form",label:{t:"Expr",v:"UIMeta.beautifyClassName(values.class)"}},_rank:0},{_selectors:[{_key:"class",_value:{},_isDecl:!1},{_key:"layout",_value:["Inspect","SearchForm"],_isDecl:!1}],_properties:{component:"StringComponent",bindings:{}},_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1}],_properties:{trait:"Stack"},_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1},{_key:"layout",_value:"Actions",_isDecl:!0}],_properties:{trait:"ActionMenu"},_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1},{_key:"layout",_value:"Inspect",_isDecl:!0}],_properties:{trait:"Form"},_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"ButtonArea",_isDecl:!1}],_properties:{trait:"StaticActionButtons"},_rank:0},{_selectors:[{_key:"layout",_value:"SelectionButtonArea",_isDecl:!1}],_properties:{trait:"InstanceActionButtons"},_rank:0},{_selectors:[{_key:"layout",_value:"Links",_isDecl:!1}],_properties:{trait:"ActionLinks"},_rank:0},{_selectors:[{_key:"layout",_value:"LabelField",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"layout",_value:"LabelField",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"labelField",_isDecl:!0}],_properties:{visible:{t:"OV",v:"true"}},_rank:0},{_selectors:[{_key:"layout",_value:"LabelField",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:["Table","DetailTable"],_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{component:"MetaTable",bindings:{enableScrolling:!0,showSelectionColumn:!1,displayGroup:{t:"CFP",v:"displayGroup"},title:{t:"Expr",v:'properties.get("label")'},submitOnSelectionChange:!0,singleSelect:!0}},_rank:0},{_selectors:[{_key:"layout",_value:"ListItem",_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{component:"StringComponent",bindings:{value:{t:"Expr",v:'properties.get("objectTitle")'}}},_rank:0},{_selectors:[{_key:"object",_value:"*",_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{objectTitle:{t:"Expr",v:'FieldPath.getFieldValue(object, meta.displayKeyForClass(values.get("class")))'}},_rank:0},{_selectors:[{_key:"object",_value:"*",_isDecl:!1},{_key:"layout",_value:"*",_isDecl:!1}],_properties:{objectTitle:{t:"Expr",v:'FieldPath.getFieldValue(object, meta.displayKeyForClass(values.get("class")))'}},_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1}],_properties:{pageBindings:{t:"Expr",v:'(properties.get("homePage") == "MetaHomePageComponent") ? new Map().set("module", values.get("module")) : null'},component:"MetaDashboardLayoutComponent",visible:{t:"SDW",v:'!properties.get("hidden")'},homePage:"MetaHomePageComponent"},_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1},{_key:"layout",_value:"*",_isDecl:!1}],_properties:{visible:!0},_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionTOC",_isDecl:!0}],_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionTOC",_isDecl:!0},{_key:"layout",_value:"Actions",_isDecl:!0}],_properties:{component:"MetaActionListComponent",label:"Actions",after:"zToc"},_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionTOC",_isDecl:!0}],_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"actionCategory",_value:"*",_isDecl:!1}],_properties:{visible:{t:"SDW",v:'!properties.get("hidden")'}},_rank:0},{_selectors:[{_key:"actionCategory",_value:"General",_isDecl:!0}],_properties:{after:"zMain",label:{t:"i18n",v:{key:"a001",defVal:"General"}}},_rank:0}]},_e={oss:[{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_properties:{displayKey:"toString",searchOperation:"search"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"trait",_value:"Searchable",_isDecl:!1}],_properties:{textSearchSupported:!0,searchOperation:"keywordSearch"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1}],_properties:{useTextIndex:!0},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1},{_key:"field",_value:"keywords",_isDecl:!0}],_properties:{visible:{t:"OV",v:"true"},bindings:{size:30},trait:"SearchableProperty",rank:0,after:"zTop",type:"java.lang.String"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"SearchableProperty",_isDecl:!1}],_properties:{visible:{t:"OV",v:"true"}},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toOneRelationship",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toOneRelationship",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{destinationClass:{t:"Expr",v:"elementType"},multiselect:!1,displayKey:{t:"Expr",v:'meta.displayLabel(type, properties.get("labelField"))'},type:"Dropdown",key:{t:"Expr",v:"field"},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toOneRelationship",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toManyChooser",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toManyChooser",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{destinationClass:{t:"Expr",v:"elementType"},multiselect:!0,displayKey:{t:"Expr",v:'meta.displayLabel(type, properties.get("labelField"))'},type:"Chooser",key:{t:"Expr",v:"field"},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toManyChooser",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toManyLink",_isDecl:!1}],_properties:{component:"AWHyperlink",bindings:{omitTags:{t:"Expr",v:"!value || (value.size() == 0)"},awcontent:{t:"Expr",v:'value ? ("" + value.size() + " items") : "(none)"'},action:{t:"Expr",v:'set("object", value), set("actionCategory", "General"), set("action", "Inspect"), ariba.ui.meta.core.UIMeta.getInstance().fireAction(this, requestContext)'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0},{_key:"trait",_value:"toOneRelationship",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0},{_key:"trait",_value:"toManyChooser",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0},{_key:"trait",_value:"toManyLink",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0}],_rank:0},{_selectors:[{_key:"action",_value:"Inspect",_isDecl:!1}],_properties:{pageBindings:{layout:"Inspect",clientPanel:!0,operation:"view",object:{t:"Expr",v:"object"}},visible:!0,trait:"pageAction",pageName:"MetaContentPageComponent"},_rank:0}]},ye=function(e){function r(){var t=e.call(this)||this;try{t.beginRuleSet("UIMeta"),t.registerKeyInitObserver(r.KeyClass,new be),t.defineKeyAsPropertyScope(r.KeyLayout),t.defineKeyAsPropertyScope(r.KeyModule),t.registerDefaultLabelGeneratorForKey(r.KeyClass),t.registerDefaultLabelGeneratorForKey(r.KeyField),t.registerDefaultLabelGeneratorForKey(r.KeyLayout),t.registerDefaultLabelGeneratorForKey(r.KeyModule),t.registerDefaultLabelGeneratorForKey(r.KeyAction),t.registerDefaultLabelGeneratorForKey(r.KeyActionCategory),t.registerPropertyMerger(r.KeyArea,V.PropertyMerger_DeclareList),t.registerPropertyMerger(r.KeyLayout,V.PropertyMerger_DeclareList),t.registerPropertyMerger(r.KeyModule,V.PropertyMerger_DeclareList),t.mirrorPropertyToContext(r.KeyEditing,r.KeyEditing),t.mirrorPropertyToContext(r.KeyLayout,r.KeyLayout),t.mirrorPropertyToContext(r.KeyComponentName,r.KeyComponentName),t.registerPropertyMerger(r.KeyEditing,new Q),t.keyData(r.KeyOperation).setParent("view","inspect"),t.keyData(r.KeyOperation).setParent("print","view"),t.keyData(r.KeyOperation).setParent("edit","inspect"),t.keyData(r.KeyOperation).setParent("search","inspect"),t.keyData(r.KeyOperation).setParent("keywordSearch","search"),t.keyData(r.KeyOperation).setParent("textSearch","keywordSearch"),t.registerStaticallyResolvable(r.PropFieldsByZone,new fe,r.KeyClass),t.registerStaticallyResolvable(r.PropFieldPropertyList,new me,r.KeyClass),t.registerStaticallyResolvable(r.PropLayoutsByZone,new ke,r.KeyLayout)}finally{t.endRuleSet()}return t}return u(r,e),r.getInstance=function(){return this._instance||(this._instance=new this)},r.defaultLabelForIdentifier=function(e){var r=e.lastIndexOf(".");return-1!==r&&r!==e.length-1&&(e=e.substring(r+1)),t.decamelize(e)},r.beautifyClassName=function(e){return t.decamelize(e," ")},r.beautifyFileName=function(e){return t.decamelize(e," ")},r.prototype.zones=function(e){var n=e.propertyForKey("zones");return t.isBlank(n)?V.toList(r.ZoneMain):n},r.prototype.zonePath=function(e){var n;return t.isPresent(e.values.get(r.KeyLayout))&&(e.push(),e.setScopeKey(r.KeyLayout),n=e.propertyForKey(r.KeyZonePath),e.pop()),n},r.prototype.newContext=function(e){return void 0===e&&(e=!1),new T(this,e)},r.prototype.loadDefaultRuleFiles=function(e){if(t.isPresent(pe.oss)){this.beginRuleSetWithRank(V.SystemRulePriority,"system");try{this._loadRules(pe.oss,"system",!1)}finally{this.endRuleSet()}}if(t.isPresent(_e.oss)){this.beginRuleSetWithRank(V.SystemRulePriority+2e3,"system-persistence");try{this._loadRules(_e.oss,"system-persistence",!1)}finally{this.endRuleSet()}}return t.isPresent(e)&&this.registerComponents(e),!1},r.prototype.loadApplicationRules=function(){var e,n,i,o,a=["Application"];t.isPresent(this.appConfig)&&(a=this.appConfig.get(r.AppConfigRuleFilesParam)||["Application"],n=this.appConfig.get(r.AppConfigUserRulesParam),t.ListWrapper.contains(a,"Application")||a.unshift("Application"));try{for(var s=p(a),l=s.next();!l.done;l=s.next()){var c=l.value,u=c+"Rule";if(this._testRules.has(u)){if(this._testRules.has(u)&&t.isPresent(this._testRules.get(u).oss)&&(e=this._testRules.get(u).oss,t.isPresent(e))){this.beginRuleSetWithRank(V.LowRulePriority,c.toLowerCase());try{this._loadRules(e,c.toLowerCase(),!1)}finally{this.endRuleSet()}}}else for(var _ in n){var y=n[_];if(t.isPresent(y)&&t.isPresent(y[u])&&t.isPresent(y[u].oss)&&(e=y[u].oss),t.isPresent(e)){this.beginRuleSetWithRank(V.LowRulePriority,c.toLowerCase());try{this._loadRules(e,c.toLowerCase(),!1)}finally{this.endRuleSet()}}}}}catch(h){i={error:h}}finally{try{l&&!l.done&&(o=s["return"])&&o.call(s)}finally{if(i)throw i.error}}},r.prototype.loadUserRule=function(e,r){if(t.isPresent(e)){this.beginRuleSetWithRank(this._ruleCount,"user:"+r);try{this._loadRules(e,"user",!1)}finally{this.endRuleSet()}}return!1},r.prototype.defaultLabelGeneratorForKey=function(e){return new ge(e)},r.prototype.registerDerivedValue=function(e,t,r,n){var i=new Map;i.set(e,t),this.addRule(new j(V.toList(new O(r,n)),i,V.SystemRulePriority))},r.prototype.registerStaticallyResolvable=function(e,t,r){this.registerDerivedValue(e,new b(t),r,V.KeyAny)},r.prototype.registerDefaultLabelGeneratorForKey=function(e){this.registerDerivedValue(r.KeyLabel,new ve(this),e,r.KeyAny)},r.prototype.fieldList=function(e){return this.itemList(e,r.KeyField,r.ZonesTLRMB)},r.prototype.fieldsByZones=function(e){return this.itemsByZones(e,r.KeyField,r.ZonesTLRMB)},r.prototype.itemNamesByZones=function(e,t,r){var n=this.itemsByZones(e,t,r);return this.mapItemPropsToNames(n)},r.prototype.mapItemPropsToNames=function(e){var r=this,n=new Map;return t.MapWrapper.iterable(e).forEach(function(e,i){if(t.isPresent(e)&&t.isArray(e)){var o=[];try{for(var a=p(e),s=a.next();!s.done;s=a.next()){var l=s.value;l instanceof oe&&o.push(l.name)}}catch(_){c={error:_}}finally{try{s&&!s.done&&(u=a["return"])&&u.call(a)}finally{if(c)throw c.error}}n.set(i,o)}else n.set(i,r.mapItemPropsToNames(e));var c,u}),n},r.prototype.predecessorMap=function(e,n,i){var o=this.itemProperties(e,n,!1);return t.MapWrapper.groupBy(o,function(e){var n=e.properties.get(r.KeyAfter);return t.isPresent(n)?n:i})},r.prototype.itemList=function(e,t,r){var n,i,o=this.predecessorMap(e,t,r[0]),a=[];try{for(var s=p(r),l=s.next();!l.done;l=s.next()){var c=l.value;this.accumulatePrecessors(o,c,a)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(i=s["return"])&&i.call(s)}finally{if(n)throw n.error}}return a},r.prototype.isZoneReference=function(e){var t=e.lastIndexOf("."),r=-1===t?e:e.substring(t+1);return r.length>1&&"z"===r[0]&&r[1].toUpperCase()===r[1]},r.prototype.itemsByZones=function(e,r,n){var i=this,o=this.predecessorMap(e,r,n[0]),a=new Map;return t.MapWrapper.iterable(o).forEach(function(e,r){if(i.isZoneReference(r)){var n=[];i.accumulatePrecessors(o,r,n),t.FieldPath.setFieldValue(a,r,n)}}),a},r.prototype.accumulatePrecessors=function(e,n,i){var o=e.get(n);if(!t.isBlank(o)){t.ListWrapper.sort(o,function(e,t){var n=e.properties.get(r.KeyRank),i=t.properties.get(r.KeyRank);return null===n&&(n=100),null===i&&(i=100),n===i?0:null===n?1:null===i?-1:n-i});try{for(var a=p(o),s=a.next();!s.done;s=a.next()){var l=s.value;l.hidden||i.push(l),this.accumulatePrecessors(e,l.name,i)}}catch(_){c={error:_}}finally{try{s&&!s.done&&(u=a["return"])&&u.call(a)}finally{if(c)throw c.error}}var c,u}},r.prototype.addPredecessorRule=function(e,n,i,o,a){if(t.isBlank(i)&&t.isBlank(o))return null;var s=this.scopeKeyForSelector(n);(t.isBlank(s)||s===r.KeyClass)&&(s=r.KeyField);var l=new Array;t.ListWrapper.addAll(l,n),l.push(new O(s,e));var c=new Map;t.isPresent(i)&&c.set(r.KeyAfter,i),t.isPresent(o)&&c.set(r.KeyTrait,o);var u=new j(l,c,0,a);return this.addRule(u),u},r.prototype.flattenVisible=function(e,n,i,o){var a,s,l,c,u=[];if(t.isPresent(e))try{for(var _=p(n),y=_.next();!y.done;y=_.next()){var h=y.value,d=e.get(h);if(!t.isBlank(d))try{for(var v=p(d),f=v.next();!f.done;f=v.next()){var m=f.value;o.push(),o.set(i,m),o.booleanPropertyForKey(r.KeyVisible,!1)&&u.push(m),o.pop()}}catch(k){l={error:k}}finally{try{f&&!f.done&&(c=v["return"])&&c.call(v)}finally{if(l)throw l.error}}}}catch(g){a={error:g}}finally{try{y&&!y.done&&(s=_["return"])&&s.call(_)}finally{if(a)throw a.error}}return u},r.prototype.displayKeyForClass=function(e){var n=this.newContext();n.set(r.KeyLayout,"LabelField"),n.set(r.KeyClass,e);var i=this.itemProperties(n,r.KeyField,!0);return t.ListWrapper.isEmpty(i)?"$toString":i[0].name},r.prototype.displayLabel=function(e,r){return t.isPresent(r)?r:this.displayKeyForClass(e)},r.prototype.createLocalizedString=function(e,r){return t.assert(t.isPresent(this._currentRuleSet),"Attempt to create localized string without currentRuleSet in place"),new de(this,this._currentRuleSet.filePath,e,r)},Object.defineProperty(r.prototype,"routingService",{get:function(){return t.isPresent(this._injector)?this._injector.get(t.RoutingService):null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"env",{get:function(){return t.isPresent(this._injector)?this._injector.get(t.Environment):new t.Environment},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"appConfig",{get:function(){return t.isPresent(this._injector)?this._injector.get(t.AppConfig):null},enumerable:!0,configurable:!0}),r.prototype.registerComponents=function(e){if(t.assert(t.isPresent(this.injector),"Cannot register components without Injector in order to get access to ComponentRegistry Service"),t.assert(this.env.inTest||t.isPresent(this.appConfig.get(r.AppConfigUserRulesParam)),"Unable to initialize MetaUI as user rules are missing. please use: metaui.rules.user-rules configuration param"),this.componentRegistry=this.injector.get(n.ComponentRegistry),t.isPresent(this.componentRegistry)){if(this.componentRegistry.registerTypes(e),!this.env.inTest){var i=this.appConfig.get(r.AppConfigUserRulesParam);try{for(var o=p(i),a=o.next();!a.done;a=o.next()){var s=a.value;this.componentRegistry.registerTypes(s)}}catch(u){l={error:u}}finally{try{a&&!a.done&&(c=o["return"])&&c.call(o)}finally{if(l)throw l.error}}this.loadApplicationRules()}}else this.env.inTest||t.warn("UIMeta.registerComponents() No components were registered !");var l,c},r.prototype.fireActionFromProps=function(e,r){r.push();var n=e.properties.get(ae.KeyActionCategory);t.isBlank(n)&&(n=ae.DefaultActionCategory),r.set(ae.KeyActionCategory,n),r.set(ae.KeyAction,e.name),this._fireAction(r,!1),r.pop()},r.prototype.fireAction=function(e,t){void 0===t&&(t=!1),e.push(),this._fireAction(e,t),e.pop()},r.prototype._fireAction=function(e,r){var n=e.propertyForKey("actionResults");!t.isBlank(n)&&this.isRoute(n)&&this.naviateToPage(e,n,r)},r.prototype.naviateToPage=function(e,t,r){var n=this.prepareRoute(e,r),i=e;this.routingService.navigateWithRoute(t,n,i.object)},r.prototype.prepareRoute=function(e,r){var n={},i=e.propertyForKey("pageBindings");return t.isPresent(i)&&(i.forEach(function(t,r){r!==ae.KeyObject&&(n[r]=e.resolveValue(t))}),t.isPresent(r)&&(n.b=r)),n},r.prototype.prepareRouteForComponent=function(e,r,n){var i=r.propertyForKey("pageBindings");return t.isPresent(i)&&i.forEach(function(t,r){e[r]=t}),{}},r.prototype.gotoModule=function(e,t){this.env.deleteValue(De);var n=this.newContext();n.push(),n.set(r.KeyModule,e.name);var i=n.propertyForKey(r.KeyHomePage),o=this.routingService.routeForPage(i,e.name.toLowerCase(),t);"/"===t&&(t="");var a=t+"/"+o.path,s=this.prepareRoute(n,null);n.pop(),this.routingService.navigate([a,s],{skipLocationChange:!0})},r.prototype.isRoute=function(e){return t.isStringMap(e)&&t.isPresent(e.path)},r.prototype.compPageWithName=function(e){var r=this.componentRegistry.nameToType.get(e);if(!t.isBlank(r))return r;t.assert(!1,e+" component does not exists. Create Dummy Component instead of throwing this error")},r.prototype.actionsByCategory=function(e,r,n){var i=[],o=this.itemList(e,ae.KeyActionCategory,n);return t.isPresent(o)&&o.forEach(function(e){return i.push(e.name)}),this.addActionsForCategories(e,r,i),o},r.prototype.addActionsForCategories=function(e,t,r){try{for(var n=p(r),i=n.next();!i.done;i=n.next()){var o=i.value;e.push(),o!==ae.DefaultActionCategory&&e.set(ae.KeyActionCategory,o),this.collectActionsByCategory(e,t,o),e.pop()}}catch(l){a={error:l}}finally{try{i&&!i.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}var a,s},r.prototype.collectActionsByCategory=function(e,r,n){var i,o,a=this.itemProperties(e,ae.KeyAction,!0);try{for(var s=p(a),l=s.next();!l.done;l=s.next()){var c=l.value;e.push(),e.set(ae.KeyAction,c.name);var u=e.booleanPropertyForKey(ae.KeyVisible,!0);if(e.pop(),u){var _=c.properties.get(ae.KeyActionCategory);if(null==_&&(_=ae.DefaultActionCategory),n!==_)continue;var y=r.get(_);t.isBlank(y)&&(y=[],r.set(_,y)),y.push(c)}}}catch(h){i={error:h}}finally{try{l&&!l.done&&(o=s["return"])&&o.call(s)}finally{if(i)throw i.error}}},r.prototype.computeModuleInfo=function(e,t){void 0===e&&(e=this.newContext()),void 0===t&&(t=!0);var n=new he;n.modules=[];var i,o,a=this.itemList(e,r.KeyModule,r.ActionZones);n.moduleNames=[],n.moduleByNames=new Map;try{for(var s=p(a),l=s.next();!l.done;l=s.next()){var c=l.value;if(e.push(),e.set(r.KeyModule,c.name),!t||e.booleanPropertyForKey(r.KeyVisible,!0)){n.moduleNames.push(c.name);var u=new oe(c.name,e.allProperties(),!1);n.modules.push(u),n.moduleByNames.set(c.name,u),e.pop()}else e.pop()}}catch(_){i={error:_}}finally{try{l&&!l.done&&(o=s["return"])&&o.call(s)}finally{if(i)throw i.error}}return e.push(),e.set(r.KeyModule,n.moduleNames),n.actionsByCategory=new Map,n.actionCategories=this.actionsByCategory(e,n.actionsByCategory,r.ModuleActionZones),e.pop(),n},r.prototype.currentModuleLabel=function(e,t){void 0===t&&(t=this.newContext()),t.push(),t.set(r.KeyModule,e);var n=t.propertyForKey(r.KeyLabel);return t.pop(),n},r.KeyOperation="operation",r.KeyModule="module",r.KeyLayout="layout",r.KeyArea="area",r.KeyEditing="editing",r.KeyAfter="after",r.KeyHidden="hidden",r.KeyLabel="label",r.KeyComponentName="component",r.KeyBindings="bindings",r.KeyHomePage="homePage",r.KeyZonePath="zonePath",r.PropFieldsByZone="fieldsByZone",r.PropIsFieldsByZone="fiveZoneLayout",r.PropActionsByCategory="actionsByCategory",r.PropActionCategories="actionCategories",r.PropFieldPropertyList="fieldPropertyList",r.PropLayoutsByZone="layoutsByZone",r.KeyWrapperComponent="wrapperComponent",r.KeyWrapperBinding="wrapperBindings",r.RootPredecessorKey="_root",r.ZoneMain="zMain",r.ZoneTop="zTop",r.ZoneLeft="zLeft",r.ZoneMiddle="zMiddle",r.ZoneRight="zRight",r.ZoneBottom="zBottom",r.ZoneDetail="zDetail",r.AppConfigRuleFilesParam="metaui.rules.file-names",r.AppConfigUserRulesParam="metaui.rules.user-rules",r.ZonesTLRMB=[r.ZoneTop,r.ZoneLeft,r.ZoneMiddle,r.ZoneRight,r.ZoneBottom],r.ZonesMTLRB=[r.ZoneMain,r.ZoneTop,r.ZoneLeft,r.ZoneRight,r.ZoneBottom],r.ZonesDetail=[r.ZoneDetail],r._instance=null,r.ModuleActionZones=["zNav","zGlobal"],r.ActionZones=["zGlobal","zMain","zGeneral"],r}(ae),he=function(){return function(){}}(),de=function(e){function t(t,r,n,i){var o=e.call(this)||this;return o.meta=t,o._module=r,o._key=n,o._defaultValue=i,o}return u(t,e),t.prototype.evaluate=function(e){return this._defaultValue},t.prototype.toString=function(){return"LocaledString: {"+this._key+" - "+this._defaultValue+" }"},t}(k),ve=function(e){function r(t){var n=e.call(this,t,r.DefaultModule,null,null)||this;return n.meta=t,n.propertyAwaking=!0,n}return u(r,e),r.prototype.evaluate=function(r){if(t.isBlank(this._key)){var n=r.values.get(V.ScopeKey),i=r.values.get(n);this._defaultValue=ye.defaultLabelForIdentifier(i),this._key=n}return e.prototype.evaluate.call(this,r)},r.prototype.awakeForPropertyMap=function(e){return new r(this.meta)},r.DefaultModule="default",r}(de),fe=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return u(r,e),r.prototype.evaluate=function(e){var r=e.meta.itemNamesByZones(e,ye.KeyField,e.meta.zones(e)),n=e.meta.zonePath(e);return t.isPresent(n)&&(r=t.FieldPath.getFieldValue(r,n),t.isBlank(r)&&(r=new Map)),r},r}(g),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.evaluate=function(e){return e.meta.fieldList(e)},t}(g),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.evaluate=function(e){return e.meta.itemNamesByZones(e,ye.KeyLayout,e.meta.zones(e))},t}(g),ge=function(e){function r(t){var r=e.call(this)||this;return r._key=t,r}return u(r,e),r.prototype.evaluate=function(e){var r=e.values.get(this._key);return t.isPresent(r)&&t.isString(r)?ye.defaultLabelForIdentifier(r):null},r}(g),be=function(){function e(){}return e.prototype.notify=function(e,r,n){var i,o=e;if(o._testRules.has(n+"Rule"))o._testRules.has(n+"Rule")&&t.isPresent(o._testRules.get(n+"Rule").oss)&&(i=o._testRules.get(n+"Rule").oss),e.loadUserRule(i,n);else if(t.isPresent(o.appConfig)&&o.appConfig.get(ye.AppConfigUserRulesParam)){var a=o.appConfig.get(ye.AppConfigUserRulesParam);for(var s in a)t.isPresent(a[s][n+"Rule"])&&t.isPresent(a[s][n+"Rule"].oss)&&(i=a[s][n+"Rule"].oss);e.loadUserRule(i,n)}},e}(),De="CurrentMC",Ce=["module","layout","operation","class","object","actionCategory","action","field","pushNewContext"],Pe=["module","layout","operation","class","action","field","pushNewContext"],xe=function(e){function r(t,r,n){var o=e.call(this,r,null)||this;return o.elementRef=t,o.env=r,o.parentContainer=n,o.beforeContextSet=new i.EventEmitter,o.onContextChanged=new i.EventEmitter,o.afterContextSet=new i.EventEmitter,o.onAction=new i.EventEmitter,o.viewInitialized=!1,o.contextCreated=!1,o.bindingKeys=[],o}return u(r,e),r.prototype.ngOnInit=function(){this.initBindings(),this.hasObject=this._hasObject(),this.pushPop(!0),this.env.hasValue("parent-cnx")||this.env.setValue("parent-cnx",this)},r.prototype.ngOnChanges=function(e){try{for(var r=p(Pe),n=r.next();!n.done;n=r.next()){var i=n.value;if(t.isPresent(e[i])&&e[i].currentValue!==e[i].previousValue){this.initBindings();break}}}catch(s){o={error:s}}finally{try{n&&!n.done&&(a=r["return"])&&a.call(r)}finally{if(o)throw o.error}}var o,a;this.viewInitialized&&t.isPresent(e.object)&&t.isPresent(this.object)&&this.initBindings()},r.prototype.ngDoCheck=function(){this.viewInitialized&&(this.hasObject=this._hasObject(),this.pushPop(!0),t.isPresent(this.object)&&!t.equals(this.prevObject,this.object)&&this.updateModel())},r.prototype.ngAfterViewInit=function(){this.viewInitialized||this.pushPop(!1)},r.prototype.ngAfterViewChecked=function(){this.viewInitialized?this.pushPop(!1):this.viewInitialized=!0},r.prototype.pushPop=function(e){var r=this.activeContext();t.assert(e||t.isPresent(r),"pop(): Missing context");var n=e&&t.isPresent(this.pushNewContext)&&this.pushNewContext;(t.isBlank(r)||n)&&(r=ye.getInstance().newContext(n),this.contextCreated=!0,this.env.push(De,r));if(e){if(r.push(),t.isPresent(this._scopeBinding)&&this.hasObject)this.beforeContextSet.emit(this._scopeBinding),r.setScopeKey(this._scopeBinding),this.afterContextSet.emit(this._scopeBinding);else for(var i=0;i<this.bindingKeys.length;i++){var o=this.bindingKeys[i],a=this.bindingsMap.get(o);this.beforeContextSet.emit(a),r.set(o,a),this.afterContextSet.emit(a)}this._myContext=r.snapshot().hydrate(!1)}else r.pop(),this.contextCreated&&this.env.pop(De)},r.prototype.debugString=function(){if(t.isPresent(this._myContext))return this._myContext.debugString()},r.prototype.myContext=function(){return this._myContext},r.prototype.activeContext=function(){return this.env.peak(De)},r.prototype.ngOnDestroy=function(){this.env.hasValue("parent-cnx")&&this.env.deleteValue("parent-cnx")},r.prototype.initBindings=function(){var e=this;this.bindingsMap=new Map;var r=this.elementRef.nativeElement;this.initImplicitBindings();for(var n=0;n<r.attributes.length;n++){var i=r.attributes.item(n);this.ignoreBinding(i)||(t.isPresent(i.name)&&"scopekey"===i.name.toLowerCase()?this._scopeBinding=i.value:this.bindingsMap.set(i.name,i.value))}this.bindingKeys=[],this.bindingsMap.forEach(function(t,r){e.bindingKeys.push(r)}),t.ListWrapper.sortByExample(this.bindingKeys,Ce)},r.prototype.initImplicitBindings=function(){t.isPresent(this.module)&&this.bindingsMap.set("module",this.module),t.isPresent(this.layout)&&this.bindingsMap.set("layout",this.layout),t.isPresent(this.operation)&&this.bindingsMap.set("operation",this.operation),t.isPresent(this["class"])&&this.bindingsMap.set("class",this["class"]),t.isPresent(this.object)&&(this.bindingsMap.set("object",this.object),this.prevObject=Object.assign({},this.object)),t.isPresent(this.actionCategory)&&this.bindingsMap.set("actionCategory",this.actionCategory),t.isPresent(this.action)&&this.bindingsMap.set("action",this.action),t.isPresent(this.field)&&this.bindingsMap.set("field",this.field)},r.prototype.ignoreBinding=function(e){return-1!==Ce.indexOf(e.name)||t.StringWrapper.contains(e.name,"_ng")||t.StringWrapper.contains(e.name,"ng-")||t.StringWrapper.contains(e.name,"(")||t.isBlank(e.value)||0===e.value.length},r.prototype.updateModel=function(){var e=this;Object.keys(this.object).forEach(function(r){var n=e.formGroup.get(r);t.isPresent(n)&&n.patchValue(e.object[r],{onlySelf:!1,emitEvent:!0})}),this.prevObject=Object.assign({},this.object)},r.prototype._hasObject=function(){var e=this.activeContext();return!!t.isPresent(e)&&t.isPresent(e.object)},r.decorators=[{type:i.Component,args:[{selector:"m-context",template:"<ng-content></ng-content>",changeDetection:i.ChangeDetectionStrategy.OnPush,providers:[{provide:n.BaseFormComponent,useExisting:i.forwardRef(function(){return r})}]}]}],r.ctorParameters=function(){return[{type:i.ElementRef},{type:t.Environment},{type:n.BaseFormComponent,decorators:[{type:i.SkipSelf},{type:i.Optional},{type:i.Inject,args:[i.forwardRef(function(){return n.BaseFormComponent})]}]}]},r.propDecorators={module:[{type:i.Input}],layout:[{type:i.Input}],operation:[{type:i.Input}],"class":[{type:i.Input}],object:[{type:i.Input}],actionCategory:[{type:i.Input}],action:[{type:i.Input}],field:[{type:i.Input}],pushNewContext:[{type:i.Input}],beforeContextSet:[{type:i.Output}],onContextChanged:[{type:i.Output}],afterContextSet:[{type:i.Output}],onAction:[{type:i.Output}]},r}(n.BaseFormComponent),Me=function(){return function(e,t,r,n){this.component=e,this.eventName=t,this.cnxName=r,this.data=n}}(),Se=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{declarations:[xe],imports:[a.CommonModule,o.FormsModule,o.ReactiveFormsModule],entryComponents:[xe],exports:[xe,o.ReactiveFormsModule,o.FormsModule],providers:[]}]}],e}(),we=function(){function e(){}return Object.defineProperty(e.prototype,"uiMeta",{get:function(){return this._uiMeta},set:function(e){this._uiMeta=e},enumerable:!0,configurable:!0}),e.prototype.loadRules=function(e,r,n,i){var o=this;this._uiMeta=e,r.forEach(function(e,r){var a=o.readRule(e,n);t.isPresent(i)&&i(a)})},e.prototype.loadRulesWithReturn=function(e,t){var r=this,n=new Array;return e.forEach(function(e,i){var o=r.readRule(e,t);n.push(o)}),n},e.prototype.readRule=function(e,r){var n=this,i=new Array;try{for(var o=p(e._selectors),a=o.next();!a.done;a=o.next()){var s=a.value;t.isPresent(s._value)&&s._value.constructor===Object&&0===Object.keys(s._value).length&&(s._value=V.NullMarker);var l=new O(s._key,s._value,s._isDecl);i.push(l)}}catch(h){c={error:h}}finally{try{a&&!a.done&&(u=o["return"])&&u.call(o)}finally{if(c)throw c.error}}var c,u,_=t.MapWrapper.createFromStringMapWithResolve(e._properties,function(e,i){return t.isStringMap(i)&&t.isPresent(i.t)?n.resoveValue(i.t,i,r):t.isStringMap(i)&&!t.isArray(i)?t.MapWrapper.createFromStringMapWithResolve(i,function(e,t){return n.resoveValue(t.t,t,r)}):t.isArray(i)?t.ListWrapper.clone(i):i}),y=0===_.size?undefined:_;return new j(i,y,e._rank)},e.prototype.resoveValue=function(e,r,n){if(t.isBlank(r))return null;if("Expr"===e)return new x(r.v);if("SDW"===e){var i=new x(r.v);return new b(new D(i))}if("CFP"===e)return new C(r.v);if("OV"===e)return new G(r.v);if("i18n"===e&&r.v.key){var o=r.v.key;return t.isPresent(this._uiMeta)?this._uiMeta.createLocalizedString(o,r.v.defVal):new de(null,n,o,r.v.defVal)}return r},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}(),Ae=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:i.Component,args:[{selector:"app-no-meta",template:"\n        <h2>MetaIncludeComponentDirective Error:</h2>\n                No componentName property resolved in Context<br/>\n    ",styles:[""]}]}],e.ctorParameters=function(){return[]},e}(),Ke=function(e){function r(t,r,n,i,o,a,s){var l=e.call(this,r,n,o,a)||this;return l.metaContext=t,l.viewContainer=r,l.factoryResolver=n,l.env=i,l.cd=o,l.compRegistry=a,l.domUtils=s,l}return u(r,e),r.prototype.ngDoCheck=function(){var e=this.metaContext.myContext();if(!t.isBlank(e)&&!t.isBlank(this.currentComponent)){var r=e.propertyForKey("component");if(t.isPresent(r)&&t.isPresent(this.name)&&this.name!==r)this.viewContainer.clear(),this.doRenderComponent(),this.createWrapperElementIfAny(),this.createContentElementIfAny();else{var n=e.propertyForKey(ae.KeyEditable);t.isBlank(n)&&(n=e.propertyForKey(ye.KeyEditing));var i=e.propertyForKey(ye.KeyBindings),o=e.propertyForKey(ae.KeyType),a=this.componentReference().metadata.inputs;t.isPresent(i)&&t.isPresent(a)&&this.applyInputs(this.currentComponent,o,i,a,n)}}},r.prototype.resolveComponentType=function(){return this.name=this.metaContext.myContext().propertyForKey(ye.KeyComponentName),t.isBlank(this.name)?Ae:e.prototype.resolveComponentType.call(this)},r.prototype.ngContent=function(){var e,r=this.metaContext.myContext().propertyForKey(ye.KeyBindings);return t.isPresent(r)&&t.isPresent(e=r.get(n.IncludeComponentDirective.NgContent))&&(e=t.isString(e)?e:this.metaContext.myContext().resolveValue(e)),e},r.prototype.ngContentElement=function(){var e,r=this.metaContext.myContext().propertyForKey(ye.KeyBindings);return t.isPresent(r)&&t.isPresent(e=r.get(n.IncludeComponentDirective.NgContentElement))&&(e=t.isString(e)?e:this.metaContext.myContext().resolveValue(e)),e},r.prototype.createContentElementIfAny=function(){var n=!1,i=this.metaContext.myContext().propertyForKey(ye.KeyBindings);if(t.isPresent(i)&&i.has(r.NgContentLayout)){var o=i.get(r.NgContentLayout),a=this.metaContext.myContext();a.push(),a.set(ye.KeyLayout,o);var s=a.propertyForKey("component"),l=this.compRegistry.nameToType.get(s),c=this.factoryResolver.resolveComponentFactory(l),u=this.resolveDirective(c),p=this.viewContainer.createComponent(c,0),_={metadata:u,resolvedCompFactory:c,componentType:l,componentName:s};this.applyBindings(_,p,a.propertyForKey(ye.KeyBindings),!1),this.domUtils.insertIntoParentNgContent(this.currentComponent.location.nativeElement,p.location.nativeElement),a.pop(),n=!0}else n=e.prototype.createContentElementIfAny.call(this);return n&&this.cd.detectChanges(),n},r.prototype.createWrapperElementIfAny=function(){var e=this.metaContext.myContext().propertyForKey(ye.KeyWrapperComponent);if(!t.isBlank(e)){var r=this.compRegistry.nameToType.get(e),n=this.factoryResolver.resolveComponentFactory(r),i=this.resolveDirective(r),o=this.viewContainer.createComponent(n),a=this.metaContext.myContext().propertyForKey(ye.KeyWrapperBinding);o.instance.bindings=a;var s={metadata:i,resolvedCompFactory:n,componentType:r,componentName:e};this.applyBindings(s,o,a),this.domUtils.insertIntoParentNgContent(o.location.nativeElement,this.currentComponent.location.nativeElement)}},r.prototype.applyBindings=function(r,n,i,o){void 0===o&&(o=!0),e.prototype.applyBindings.call(this,r,n,i);var a=r.metadata.inputs,s=r.metadata.outputs,l=this.metaContext.myContext().propertyForKey(ye.KeyBindings),c=this.metaContext.myContext().propertyForKey(ae.KeyEditable),u=this.metaContext.myContext().propertyForKey(ae.KeyType);if(o||(l=i),!t.isBlank(l)&&!t.isBlank(a)){var p=t.MapWrapper.clone(l);this.applyInputs(n,u,p,a,c),this.applyOutputs(n,p,s)}},r.prototype.applyInputs=function(e,r,n,i,o,a){void 0===a&&(a=!0),t.isPresent(r)&&t.isPresent(e.instance.canSetType)&&e.instance.canSetType()&&n.set(ae.KeyType,r),t.isPresent(o)&&t.isPresent(e.instance.editable)&&(e.instance.editable=o);try{for(var s=p(i),l=s.next();!l.done;l=s.next()){var c=l.value,u=t.nonPrivatePrefix(c),_=n.get(u);if("name"===c&&t.isBlank(_)&&(_=this.metaContext.myContext().propertyForKey(ae.KeyField)),!this.skipInput(c,_))if(a&&_ instanceof C)this.applyDynamicInputBindings(e.instance,n,i,c,_,o);else if(a&&_ instanceof k){var y=_.evaluate(this.metaContext.myContext());e.instance[u]=y}else t.equals(e.instance[u],_)||(e.instance[u]=_)}}catch(v){h={error:v}}finally{try{l&&!l.done&&(d=s["return"])&&d.call(s)}finally{if(h)throw h.error}}var h,d},r.prototype.skipInput=function(e,i){return t.isBlank(i)||e===n.IncludeComponentDirective.NgContent||e===r.NgContentLayout},r.prototype.applyOutputs=function(e,r,i){var o,a,s=this,l=function(i){var o=t.nonPrivatePrefix(i),a=r.get(o);if(i===n.IncludeComponentDirective.NgContent)return"continue";var l=e.instance[o];a instanceof k?c.applyDynamicOutputBinding(l,a,c.metaContext.myContext()):l.subscribe(function(t){if(s.env.hasValue("parent-cnx")){var r=t,n=s.env.getValue("parent-cnx");t instanceof Me||(r=new Me(e.instance,o,o,t)),n.onAction.emit(r)}})},c=this;try{for(var u=p(i),_=u.next();!_.done;_=u.next()){l(_.value)}}catch(y){o={error:y}}finally{try{_&&!_.done&&(a=u["return"])&&a.call(u)}finally{if(o)throw o.error}}},r.prototype.applyDynamicOutputBinding=function(e,t,r){e.asObservable().subscribe(function(e){var n=t;r.resolveValue(n)})},r.prototype.applyDynamicInputBindings=function(e,r,n,i,o,a){var s=this,l=t.nonPrivatePrefix(i),c=o;this.metaContext;Object.defineProperty(e,l,{get:function(){var e=s.metaContext.myContext();return c.evaluate(e)},set:function(r){var n=s.metaContext.myContext();if((n.propertyForKey(ae.KeyEditable)||n.propertyForKey(ye.KeyEditing))&&!t.StringWrapper.equals(r,e[l])){var i=n.propertyForKey(ae.KeyType);c.evaluateSet(n,S.value(i,r))}},enumerable:!0,configurable:!0})},r.FormatterBinding="formatter",r.NgContentLayout="ngcontentLayout",r.decorators=[{type:i.Directive,args:[{selector:"m-include-component"}]}],r.ctorParameters=function(){return[{type:xe,decorators:[{type:i.Inject,args:[i.forwardRef(function(){return xe})]}]},{type:i.ViewContainerRef},{type:i.ComponentFactoryResolver},{type:t.Environment},{type:i.ChangeDetectorRef},{type:n.ComponentRegistry},{type:n.DomUtilsService}]},r.propDecorators={context:[{type:i.Input}]},r}(n.IncludeComponentDirective),Be=function(){function e(e){this.environment=e}return e.decorators=[{type:i.Component,args:[{selector:"m-form",template:'<m-context #cnx scopeKey="class">\n    \x3c!-- Dont try to render if the object is not set yet --\x3e\n    <m-form-table *ngIf="cnx.hasObject"></m-form-table>\n</m-context>\n'}]}],e.ctorParameters=function(){return[{type:t.Environment}]},e}(),Fe=function(e){function r(t,r){var n=e.call(this,t,r)||this;return n.env=t,n._metaContext=r,n}return u(r,e),r.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.updateMeta()},r.prototype.ngDoCheck=function(){this.updateMeta()},r.prototype.ngAfterViewChecked=function(){},r.prototype.updateMeta=function(){this.editing=this.context.booleanPropertyForKey(ye.KeyEditing,!1),this.editing&&(this.object=this.context.values.get(ae.KeyObject),this.contextSnapshot=this.context.snapshot()),this.doUpdate()},r.prototype.doUpdate=function(){},Object.defineProperty(r.prototype,"context",{get:function(){if(t.isPresent(this._metaContext)&&t.isPresent(this._metaContext.myContext()))return this._metaContext.myContext();t.assert(!1,"Should always have metaContext available")},enumerable:!0,configurable:!0}),r.prototype.isNestedContext=function(){return this.context.isNested},r.prototype.properties=function(e,r){return void 0===r&&(r=null),t.isPresent(this.context)?this.context.propertyForKey(e):r},r.prototype.aProperties=function(e,r,n){void 0===n&&(n=null);this._metaContext.activeContext();return t.isPresent(e)?e.propertyForKey(r):n},r}(n.BaseFormComponent),Re=function(e){function r(t,r){var n=e.call(this,r,t)||this;return n._context=t,n.env=r,n}return u(r,e),r.prototype.canShowZone=function(e){return t.isPresent(this.fieldsByZone)&&this.fieldsByZone.has(e)},r.prototype.doUpdate=function(){e.prototype.doUpdate.call(this),this.fieldsByZone=this.context.propertyForKey(ye.PropFieldsByZone),this.isFiveZoneLayout=this.context.propertyForKey(ye.PropIsFieldsByZone);var r=this.context.propertyForKey(ye.KeyBindings);t.isPresent(r)&&(this.showLabelsAboveControls=r.get("showLabelsAboveControls"),t.isBlank(this.showLabelsAboveControls)&&(this.showLabelsAboveControls=!1)),this.initForm()},r.prototype.zLeft=function(){return this.fieldsByZone.get(ye.ZoneLeft)},r.prototype.zMiddle=function(){return this.fieldsByZone.get(ye.ZoneMiddle)},r.prototype.zRight=function(){return this.fieldsByZone.get(ye.ZoneRight)},r.prototype.zTop=function(){return this.fieldsByZone.get(ye.ZoneTop)},r.prototype.zBottom=function(){return this.fieldsByZone.get(ye.ZoneBottom)},r.prototype.initForm=function(){var e=this;t.isPresent(this.form)&&(this.form.editable=this.editable);var r=this.context.object;Object.keys(this.formGroup.value).length!==Object.keys(r).length&&Object.keys(r).forEach(function(t){e.doRegister(t,r[t])})},r.decorators=[{type:i.Component,args:[{selector:"m-form-table",template:'<ng-template [ngIf]="isFiveZoneLayout">\n\n    <aw-form-table #metaFormTable [editable]="editing" [useFiveZone]="isFiveZoneLayout"\n                   [omitPadding]="isNestedContext()"\n                   [editabilityCheck]="false"\n                   [labelsOnTop]="showLabelsAboveControls">\n\n\n        <aw-top *ngIf="canShowZone(\'zTop\')">\n            <ng-template ngFor let-curentField [ngForOf]="zTop()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"\n                                [initialSize]="\'x-large\'"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-top>\n\n\n        <aw-left *ngIf="canShowZone(\'zLeft\')">\n\n            <ng-template ngFor let-curentField [ngForOf]="zLeft()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-left>\n\n\n        <aw-middle *ngIf="canShowZone(\'zMiddle\')">\n            <ng-template ngFor let-curentField [ngForOf]="zMiddle()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-middle>\n\n        <aw-right *ngIf="canShowZone(\'zRight\')">\n            <ng-template ngFor let-curentField [ngForOf]="zRight()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-right>\n\n\n        <aw-bottom *ngIf="canShowZone(\'zBottom\')">\n            <ng-template ngFor let-curentField [ngForOf]="zBottom()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"\n                                [initialSize]="\'x-large\'"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-bottom>\n    </aw-form-table>\n</ng-template>\n',styles:[""]}]}],r.ctorParameters=function(){return[{type:xe,decorators:[{type:i.Host}]},{type:t.Environment}]},r.propDecorators={form:[{type:i.ViewChild,args:["metaFormTable"]}]},r}(Fe),Le=function(e){function r(t,r){var n=e.call(this,r,t)||this;return n._metaContext=t,n.env=r,n.initialSize="medium",n}return u(r,e),r.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.validators=this.createValidators()},r.prototype.bindingBoolProperty=function(e){var r=this.context.propertyForKey(ye.KeyBindings);if(t.isPresent(r)&&r.has(e)){var n=r.get(e);return t.BooleanWrapper.boleanValue(n)}return!1},r.prototype.bindingStringProperty=function(e){var r=this.context.propertyForKey(ye.KeyBindings);return t.isPresent(r)&&r.has(e)?r.get(e):null},Object.defineProperty(r.prototype,"size",{get:function(){var e=this.context.propertyForKey(ye.KeyBindings);return t.isPresent(e)&&e.has("size")?e.get("size"):this.initialSize},set:function(e){this.initialSize=e},enumerable:!0,configurable:!0}),r.prototype.createValidators=function(){var e=this;return[function(r){if(t.isPresent(o.Validators.required(r))||!r.touched)return null;var n=ye.validationError(e.context);return t.isPresent(n)?{metavalid:{msg:n}}:null}]},r.prototype.isRequired=function(){return t.isPresent(this.editing)&&this.context.booleanPropertyForKey("required",!1)},r.decorators=[{type:i.Component,args:[{selector:"m-form-row",template:'<aw-form-row\n    [editable]="editable"\n    [customValidators]="validators"\n    [size]="size"\n    [hidden]="!properties(\'visible\')"\n    [styleClass]="bindingStringProperty(\'styleClass\')"\n    [name]="properties(\'field\')"\n    [required]="isRequired()"\n    [label]="properties(\'label\')"\n    [noLabelLayout]="bindingBoolProperty(\'useNoLabelLayout\')">\n\n    <m-include-component></m-include-component>\n</aw-form-row>\n\n',styles:[""],providers:[{provide:n.FormRowComponent,useExisting:i.forwardRef(function(){return r})}]}]}],r.ctorParameters=function(){return[{type:xe,decorators:[{type:i.Host}]},{type:t.Environment}]},r.propDecorators={field:[{type:i.Input}],initialSize:[{type:i.Input}]},r}(Fe),Ie=function(){function e(e,t){this.route=e,this.routingService=t,this.newContext=!0,this.isInspectAction=!1,this.okLabel="Back"}return e.prototype.ngOnInit=function(){this.layout=this.route.snapshot.params.layout,this.operation=this.route.snapshot.params.operation;var e="/"+this.route.snapshot.url[0].toString();this.routingService.stateCacheHistory.has(e)&&(this.object=this.routingService.stateCacheHistory.get(e),this.objectName=ye.defaultLabelForIdentifier(this.object.constructor.name));var r=this.route.snapshot.params.b;t.isPresent(r)&&t.BooleanWrapper.isTrue(r)&&(this.isInspectAction=!0)},e.prototype.onBack=function(e){this.routingService.goBack()},e.decorators=[{type:i.Component,args:[{selector:"m-content-page",template:'\x3c!-- TODO: impplement dynamic title based on the operation and object as well as updates buttons--\x3e\n\n<m-context [pushNewContext]="newContext" [object]="object" [operation]="operation"\n           [layout]="layout">\n\n    <aw-basic-navigator (onOKAction)="onBack($event)" [okActionLabel]="okLabel"\n                        [showCancelButton]="!isInspectAction">\n\n\n        <div class="page-container ">\n            <br/>\n            <h3>{{objectName}} details:</h3>\n\n            <m-include-component></m-include-component>\n        </div>\n    </aw-basic-navigator>\n\n</m-context>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:s.ActivatedRoute},{type:t.RoutingService}]},e}(),Ee=function(e){function r(t,r){var n=e.call(this,r,t)||this;return n._metaContext=t,n.env=r,n.nameToLayout=new Map,n.contextMap=new Map,n}return u(r,e),r.prototype.afterContextSet=function(e){this.layoutContext=this.activeContext,this.contextMap.set(e,this.layoutContext.snapshot().hydrate(!1))},r.prototype.beforeContextSet=function(e){this.layout=this.nameToLayout.get(e)},Object.defineProperty(r.prototype,"activeContext",{get:function(){return this._metaContext.activeContext()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allLayouts",{get:function(){var e=this;if(t.isBlank(this._allLayouts)){var r=this.activeContext.meta;this._allLayouts=r.itemList(this.activeContext,ye.KeyLayout,this.zones()),this.nameToLayout.clear(),this._allLayouts.forEach(function(t){return e.nameToLayout.set(t.name,t)})}return this._allLayouts},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"layoutsByZones",{get:function(){if(t.isBlank(this._layoutsByZones)){var e=this.activeContext.meta;this._layoutsByZones=e.itemsByZones(this.activeContext,ye.KeyLayout,this.zones())}return this._layoutsByZones},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e,this._propertyMap=null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"propertyMap",{get:function(){return t.isBlank(this._propertyMap)&&(this.activeContext.push(),this._propertyMap=this.activeContext.allProperties(),this.activeContext.pop()),this._propertyMap},enumerable:!0,configurable:!0}),r.prototype.label=function(){return this.activeContext.resolveValue(this.propertyMap.get(ye.KeyLabel))},r.prototype.labelForContext=function(t){var r=this.contextMap.get(t);return e.prototype.aProperties.call(this,r,ye.KeyLabel)},r.prototype.zones=function(){return ye.ZonesTLRMB},r.prototype.properties=function(e,r){return void 0===r&&(r=null),t.isPresent(this.activeContext)?this.activeContext.propertyForKey(e):r},r.prototype.debugString=function(e){var r=this.contextMap.get(e);return t.assert(t.isPresent(r),"Trying to retrive debugString on non-existing context"),r.debugString()},r.prototype.ngOnDestroy=function(){this.layoutContext=null,this.contextMap.clear(),this.contextMap=null},r}(Fe),Te=function(e){function r(t,r,n){var i=e.call(this,t,r)||this;return i._metaContext=t,i.env=r,i.sanitizer=n,i}return u(r,e),r.prototype.styleString=function(e){this.contextMap.get(e);return null},r.prototype.classString=function(e){var r=this.contextMap.get(e);return t.isPresent(r)?r.propertyForKey("elementClass"):null},r.decorators=[{type:i.Component,args:[{template:'\x3c!--<b>MetaElementList: {{allLayouts}} </b>--\x3e\n\x3c!--<pre [innerHTML]="context.debugString()"></pre>--\x3e\n\n<ng-template ngFor [ngForOf]="allLayouts" let-cLayout>\n\n    <m-context [layout]="cLayout.name" (afterContextSet)="afterContextSet($event)"\n               (beforeContextSet)="beforeContextSet($event)">\n\n        \x3c!--<b>MetaElementList: layout {{cLayout.name}} </b>--\x3e\n        \x3c!--<pre [innerHTML]="debugString(cLayout.name)"></pre>--\x3e\n\n        <div class="ui-g ">\n            <div class="ui-g-12 ui-g-nopad" [ngClass]="classString(cLayout.name)"\n                 [ngStyle]="styleString(cLayout.name)"\n            >\n                <m-include-component></m-include-component>\n            </div>\n        </div>\n    </m-context>\n\n</ng-template>\n\n',styles:[""]}]}],r.ctorParameters=function(){return[{type:xe},{type:t.Environment},{type:l.DomSanitizer}]},r}(Ee),Oe=function(e){function r(t,r){var n=e.call(this,r,t)||this;return n._metaContext=t,n.env=r,n.renderAs="buttons",n.defaultStyle="info",n.align="right",n._contextMap=new Map,n}return u(r,e),r.prototype.actionCategories=function(){var e=this;if(t.isBlank(this._actionsByCategory)||t.isBlank(this._actionsByName)){t.isPresent(this.filterActions)&&this.context.set("filterActions",this.filterActions);var r=this.context.meta;this.context.push(),this.menuModel=[],this._actionsByCategory=new Map,this._actionsByName=new Map,this.categories=r.actionsByCategory(this.context,this._actionsByCategory,ye.ActionZones),this.context.pop(),this._actionsByCategory.forEach(function(t,r){t.forEach(function(t){return e._actionsByName.set(t.name,t)})})}return this.categories},r.prototype.actions=function(e){return this._actionsByCategory.get(e.name)},r.prototype.actionClicked=function(e){var t=this._contextMap.get(e);t.meta.fireActionFromProps(this._actionsByName.get(e),t)},r.prototype.onAfterContextSet=function(e){var t=this._metaContext.activeContext().snapshot().hydrate(!1);this._contextMap.set(e,t),"menu"===this.renderAs&&this.populateMenu(e)},r.prototype.onContextChanged=function(e){console.log("Changed = "+e)},r.prototype.label=function(t){var r=this._contextMap.get(t);return e.prototype.aProperties.call(this,r,ye.KeyLabel)},r.prototype.isActionDisabled=function(e){var r=this._contextMap.get(e);return!t.isPresent(r)||!r.booleanPropertyForKey("enabled",!1)},r.prototype.alignRight=function(){return"right"===this.align},r.prototype.style=function(r){var n=this._contextMap.get(r),i=e.prototype.aProperties.call(this,n,"buttonStyle");return t.isPresent(i)?i:this.defaultStyle},r.prototype.populateMenu=function(e){var t=this,r=this.label(e),n=this.menuModel.findIndex(function(t){return t.actionName===e}),i={label:r,actionName:e,disabled:this.isActionDisabled(e),command:function(e){t.actionClicked(e.item.actionName)}};-1===n?this.menuModel.push(i):this.menuModel[n]=i},r.decorators=[{type:i.Component,args:[{template:'<span [class.u-flr]="alignRight()">\n    <m-context *ngIf="renderAs === \'buttons\'">\n        <ng-template ngFor [ngForOf]="actionCategories()" let-category>\n            <m-context [actionCategory]="category.name">\n                <ng-template ngFor [ngForOf]="actions(category)" let-action>\n                    <m-context [action]="action.name"\n                               (onContextChanged)="onContextChanged($event)"\n                               (afterContextSet)="onAfterContextSet($event)">\n                        <aw-button (action)="actionClicked(action.name)"\n                                   [style]="style(action.name)"\n                                   [disabled]="isActionDisabled(action.name)">\n\n                        {{ label(action.name) }}\n                        </aw-button>\n                    </m-context>\n                </ng-template>\n            </m-context>\n\n        </ng-template>\n    </m-context>\n\n    <m-context *ngIf="renderAs === \'links\'">\n        <ng-template ngFor [ngForOf]="actionCategories()" let-category>\n            <m-context [actionCategory]="category.name">\n                <ng-template ngFor [ngForOf]="actions(category)" let-action>\n                    <m-context [action]="action.name"\n                               (onContextChanged)="onContextChanged($event)"\n                               (afterContextSet)="onAfterContextSet($event)">\n                        <aw-button (action)="actionClicked(action.name)"\n                                   [style]="\'link\'"\n                                   [disabled]="isActionDisabled(action.name)">\n\n                        {{ label(action.name) }}\n                        </aw-button>\n                    </m-context>\n                </ng-template>\n            </m-context>\n\n        </ng-template>\n    </m-context>\n\n    <m-context *ngIf="renderAs === \'menu\'">\n        <ng-template ngFor [ngForOf]="actionCategories()" let-category>\n            <m-context [actionCategory]="category.name">\n\n                <ng-template ngFor [ngForOf]="actions(category)" let-action>\n                    <m-context [action]="action.name"\n                               (onContextChanged)="onContextChanged($event)"\n                               (afterContextSet)="onAfterContextSet($event)">\n                    </m-context>\n                </ng-template>\n            </m-context>\n        </ng-template>\n\n        <p-menu #menu popup="popup" [model]="menuModel"></p-menu>\n\n        \x3c!-- todo: extend button to support icons --\x3e\n        <aw-button (action)="menu.toggle($event)">\n            Actions\n        </aw-button>\n\n    </m-context>\n</span>\n\n\n\n\n\n',styles:[".m-action-list{width:100%}"]}]}],r.ctorParameters=function(){return[{type:xe},{type:t.Environment}]},r.propDecorators={renderAs:[{type:i.Input}],defaultStyle:[{type:i.Input}],align:[{type:i.Input}],filterActions:[{type:i.Input}]},r}(Fe),je=function(e){function r(t,r){var n=e.call(this,t)||this;return n.env=t,n.activatedRoute=r,n}return u(r,e),r.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this);var r=this.activatedRoute.snapshot.params;t.isPresent(r)&&t.isPresent(r[ye.KeyModule])&&(this.module=r[ye.KeyModule])},r.prototype.hasModule=function(){return t.isPresent(this.module)},r.decorators=[{type:i.Component,args:[{selector:"m-home-page",template:'<div class="m-page" *ngIf="hasModule()">\n    <m-context [module]="module">\n        <m-include-component></m-include-component>\n    </m-context>\n\n</div>\n\n\n',styles:['.m-page{width:100%;margin:0 auto;padding:5px}.m-page:after{content:".";display:block;height:0;clear:both;visibility:hidden}.module-footer{clear:both}']}]}],r.ctorParameters=function(){return[{type:t.Environment},{type:s.ActivatedRoute}]},r.propDecorators={module:[{type:i.Input}]},r}(n.BaseComponent),Ne={small:"ui-md-3",medium:"ui-md-4",wide:"ui-md-6",large:"ui-md-12"},Ve=function(e){function r(t,r){var n=e.call(this,t,r)||this;return n.activeMenu=!1,n.dashboardName="",n}return u(r,e),r.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.dashboardName=this.label()},r.prototype.toggleMenu=function(e){this.activeMenu=!this.activeMenu},r.prototype.zones=function(){return r.ZonesTB},r.prototype.topLayouts=function(){var e=this.layoutsByZones.get(ye.ZoneTop);return t.isPresent(e)?e:[]},r.prototype.portletWidth=function(e){var r=this.contextMap.get(e).propertyForKey("portletWidth");return t.isPresent(r)&&t.isPresent(Ne[r])?Ne[r]:"ui-md-4"},r.prototype.bottomLayouts=function(){var e=this.layoutsByZones.get(ye.ZoneBottom);return t.isPresent(e)?e:[]},r.prototype.zTocLayouts=function(){var e=this.layoutsByZones.get(r.ZoneToc);return t.isPresent(e)?e:[]},r.ZoneToc="zToc",r.ZonesTB=[r.ZoneToc,ye.ZoneTop,ye.ZoneBottom],r.decorators=[{type:i.Component,args:[{template:'<div>\n    <span class="m-dashbord-name">{{dashboardName}} </span>\n    <span class="m-dashbord-lbl"> Dashboard</span>\n</div>\n\n\n<div id="m-toggle-bar" *ngIf="zTocLayouts().length > 0">\n    <aw-hyperlink (action)="toggleMenu($event)" [size]="\'large\'">\n        <i class="fa fa-bars"></i>\n    </aw-hyperlink>\n</div>\n<div id="m-toc" [class.active]="activeMenu" *ngIf="zTocLayouts().length > 0">\n    <div class="ui-g ">\n        <m-context *ngFor="let layout of zTocLayouts()"\n                   [layout]="layout.name" (afterContextSet)="afterContextSet($event)"\n                   (beforeContextSet)="beforeContextSet($event)">\n\n            <div class="ui-g-12 " [ngClass]="portletWidth(layout.name)">\n                <p-panel [header]="labelForContext(layout.name)">\n                    <m-include-component></m-include-component>\n                </p-panel>\n            </div>\n        </m-context>\n    </div>\n</div>\n\n<div id="m-content">\n    <div class="ui-g m-dashboard">\n        \x3c!-- top --\x3e\n        <div class="ui-g-12">\n            <div class="ui-g ">\n                <m-context *ngFor="let layout of topLayouts()"\n                           [layout]="layout.name" (afterContextSet)="afterContextSet($event)"\n                           (beforeContextSet)="beforeContextSet($event)">\n\n                    <div class="ui-g-12 " [ngClass]="portletWidth(layout.name)">\n                        <p-panel [header]="labelForContext(layout.name)" [toggleable]="true">\n                            <m-include-component></m-include-component>\n                        </p-panel>\n                    </div>\n                </m-context>\n            </div>\n        </div>\n\n        \x3c!-- bottom --\x3e\n        <div class="ui-g-12">\n            <div class="ui-g ">\n                <m-context *ngFor="let layout of bottomLayouts()"\n                           [layout]="layout.name" (afterContextSet)="afterContextSet($event)"\n                           (beforeContextSet)="beforeContextSet($event)">\n\n                    <div class="ui-g-12 " [ngClass]="portletWidth(layout.name)">\n                        <p-panel [header]="labelForContext(layout.name)" [toggleable]="true">\n                            <m-include-component></m-include-component>\n                        </p-panel>\n                    </div>\n                </m-context>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n',styles:["#m-toc{position:relative;float:left;z-index:99;width:15em;padding:.5em;box-shadow:6px 0 10px -4px rgba(0,0,0,.3)}#m-content{float:left;padding-top:1em;padding-left:1em;height:auto}#m-toggle-bar{box-sizing:border-box;border-bottom:1px solid #dde3e6;overflow:hidden;display:none;border-radius:5px;padding:.5em;width:2em;height:2.3em}#m-toggle-bar:focus,#m-toggle-bar:hover{background-color:#ececec}#m-toggle-bar:after{content:'';display:block;clear:both}.m-dashbord-name{font-weight:600}.ui-g{display:block}@media screen and (max-width:64em){#m-toc{display:none;overflow-y:auto;z-index:999}#m-toc.active{display:block}#m-toggle-bar{display:block;position:relative;z-index:1000;margin-right:1em}}"]}]}],r.ctorParameters=function(){return[{type:xe},{type:t.Environment}]},r}(Ee),We=function(e){function r(t,r){var n=e.call(this,t,r)||this;return n._metaContext=t,n.env=r,n.sectionOperations={},n.onCompleteSubscriptions={},n}return u(r,e),r.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.allLayouts.forEach(function(e){t.sectionOperations[e.name]="view"})},r.prototype.ngDoCheck=function(){e.prototype.ngDoCheck.call(this)},r.prototype.ngAfterViewInit=function(){this.sections=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}(this.viewSections.toArray())},r.prototype.onAction=function(e,r,n,i){var o=this,a=this.sections[r];this.env.hasValue("parent-cnx")&&this.env.getValue("parent-cnx").onAction.emit(new Me(a,e,n,i));"onEdit"===e&&a.editState&&"default"===a.editMode&&(this.sectionOperations[n]="edit",t.isBlank(this.onCompleteSubscriptions[n])&&(a.onEditingComplete.subscribe(function(e){return o.sectionOperations[n]="view"}),this.onCompleteSubscriptions[n]=a))},r.prototype.sectionProp=function(e,r,n){var i=this.contextMap.get(r);return t.isPresent(i)&&t.isPresent(i.propertyForKey(e))?i.propertyForKey(e):n},r.prototype.ngOnDestroy=function(){var r=this;e.prototype.ngOnDestroy.call(this),this.allLayouts.forEach(function(e){t.isPresent(r.onCompleteSubscriptions[e.name])&&r.onCompleteSubscriptions[e.name].onEditingComplete.unsubscribe()})},r.decorators=[{type:i.Component,args:[{template:'<div class="meta-sections">\n\n    <m-context *ngFor="let layout of allLayouts; let i = index" [layout]="layout.name"\n               [operation]="sectionOperations[layout.name]"\n               (afterContextSet)="afterContextSet($event)"\n               (beforeContextSet)="beforeContextSet($event)">\n\n        <aw-section [title]="sectionProp(\'title\', layout.name, null)"\n                    [description]="sectionProp(\'description\', layout.name, null)"\n                    [opened]="sectionProp(\'opened\', layout.name, true)"\n                    [actionIcon]="sectionProp(\'actionIcon\', layout.name, \'icon-edit\')"\n                    [editable]="sectionProp(\'canEdit\', layout.name, false)"\n                    [editMode]="sectionProp(\'editMode\', layout.name, \'default\')"\n                    [disableClose]="sectionProp(\'disableClose\', layout.name, false)"\n                    (onEdit)="onAction(\'onEdit\', i, layout.name, $event)"\n                    (onSaveAction)="onAction(\'onSaveAction\', i, layout.name, $event)"\n                    (onCancelAction)="onAction(\'onCancelAction\', i, layout.name, $event)">\n\n            <m-include-component></m-include-component>\n        </aw-section>\n\n    </m-context>\n</div>\n',styles:[""]}]}],r.ctorParameters=function(){return[{type:xe},{type:t.Environment}]},r.propDecorators={viewSections:[{type:i.ViewChildren,args:[n.SectionComponent]}]},r}(Ee),ze=function(e){function r(t){var r=e.call(this,t)||this;return r.env=t,r.operation="view",r.layout="Inspect",r}return u(r,e),r.prototype.ngOnInit=function(){if(t.isBlank(this.object)||!t.isStringMap(this.object))throw new Error("Cannot render primitive values as object details!")},r.decorators=[{type:i.Component,args:[{selector:"m-content-detail",template:'<m-context [pushNewContext]="true" [object]="object" [operation]="operation"\n           [layout]="layout" group="ObjectDetail">\n\n    <div class="w-object-detail">\n        <m-include-component></m-include-component>\n    </div>\n\n</m-context>\n',styles:[""]}]}],r.ctorParameters=function(){return[{type:t.Environment}]},r.propDecorators={object:[{type:i.Input}],operation:[{type:i.Input}],layout:[{type:i.Input}]},r}(n.BaseComponent),Ge=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{declarations:[Ke,Be,Re,Le,Ae,Ie,Te,Oe,je,Ve,We,ze],imports:[a.CommonModule,o.FormsModule,o.ReactiveFormsModule,Se,t.AribaCoreModule,n.AribaComponentsModule],entryComponents:[Be,Re,Le,Ae,Ie,Ie,Te,Oe,je,Ve,We,ze],exports:[Ke,Be,Re,Le,Ae,Ie,Ie,Te,Oe,je,Ve,We,o.ReactiveFormsModule,o.FormsModule,t.AribaCoreModule,n.AribaComponentsModule,ze],providers:[]}]}],e}(),Ze=Object.freeze({ACTIVE_CNTX:De,MetaContextComponent:xe,MetaUIActionEvent:Me,AWMetaLayoutModule:Ge,MetaContentPageComponent:Ie,MetaFormComponent:Be,MetaFormRowComponent:Le,MetaFormTableComponent:Re,NoMetaComponent:Ae,MetaIncludeComponentDirective:Ke,MetaBaseComponent:Fe,MetaElementListComponent:Te,MetaActionListComponent:Oe,MetaHomePageComponent:je,MetaDashboardLayoutComponent:Ve,MetaSectionsComponent:We,MetaObjectDetailComponent:ze}),Ue=[{path:"context",component:Ie}],qe=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[s.RouterModule.forChild(Ue)],exports:[s.RouterModule],providers:[]}]}],e}(),He=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[a.CommonModule,qe,Se,Ge],exports:[Se,Ge],providers:[{provide:i.APP_INITIALIZER,useFactory:$e,deps:[i.Injector],multi:!0}]}]}],e.ctorParameters=function(){return[]},e}();function $e(e){var t=function(e){return new Promise(function(t){var r=ye.getInstance();r.injector=e,r.registerLoader(new we),r.loadDefaultRuleFiles(Ze),t(!0)})};return t.bind(t,e)}e.Activation=A,e.Assignment=F,e.AssignmentSnapshot=B,e.Context=w,e.DeferredAssignment=K,e.ObjectMetaContext=E,e.PropertyAccessor=L,e.Snapshot=I,e.StaticRec=R,e.UIContext=T,e.ItemProperties=oe,e.Match=y,e.MatchResult=d,e.MatchWithUnion=h,e.UnionMatchResult=v,e.Meta=V,e.KeyValueCount=W,e.PropertyManager=z,e.OverrideValue=G,e.KeyData=Z,e.PropertyMap=U,e.PropertyMergerDynamic=q,e.PropertyMerger_Overwrite=H,e.PropertyMerger_List=$,e.PropertyMergerDeclareList=J,e.PropertyMergerDeclareListForTrait=X,e.PropertyMerger_And=Q,e.PropertyMerger_Valid=Y,e.RuleSet=ee,e.ValueMatches=te,e.MultiMatchValue=re,e.KeyValueTransformer_KeyPresent=ne,e.isPropertyMapAwaking=ie,e.NestedMap=f,e.FieldTypeIntrospectionMetaProvider=le,e.IntrospectionMetaProvider=se,e.ObjectMeta=ae,e.ObjectMetaPropertyMap=ce,e.OMPropertyMerger_Valid=ue,e.SystemPersistenceRules=_e,e.DynamicPropertyValue=k,e.StaticallyResolvable=g,e.StaticDynamicWrapper=b,e.StaticallyResolvableWrapper=D,e.ContextFieldPath=C,e.isDynamicSettable=P,e.Expr=x,e.DeferredOperationChain=M,e.ValueConverter=S,e.Rule=j,e.RuleWrapper=N,e.Selector=O,e.RuleLoaderService=we,e.LocalizedString=de,e.UIMeta=ye,e.SystemRules=pe,e.ModuleInfo=he,e.AWMetaCoreModule=Se,e.MetaUIActionEvent=Me,e.MetaContentPageComponent=Ie,e.MetaFormComponent=Be,e.MetaFormRowComponent=Le,e.MetaFormTableComponent=Re,e.NoMetaComponent=Ae,e.MetaIncludeComponentDirective=Ke,e.MetaBaseComponent=Fe,e.MetaElementListComponent=Te,e.MetaHomePageComponent=je,e.AWMetaLayoutModule=Ge,e.MetaSectionsComponent=We,e.MetaObjectDetailComponent=ze,e.MetaContextComponent=xe,e.AribaMetaUIModule=He,e.initMetaUI=$e,e.AribaMetaUIRoutingModule=qe,e.ɵa=Oe,e.ɵb=Ve,e.ɵc=Ee,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=aribaui-metaui.umd.min.js.map